##############################################################
# PVIM:1604738571 
# ARM command sent to already arm'ed port
# Description: Verify that no effect takes place for an 
# already armed CQ port, if it received another ARM command 
# Test: enable Timer threshold, send arm command check timer 
# started, re-send arm command and make sure timer not reset
# configuration: dir_cq [0,2]  ldb_cq [1,3]
# ##############################################################

#mem_update      # initialize memories to hqm_cfg defaults using backdoor access

cfg_begin

  dir qid 0
  dir qid 2 
  dir qid 9
  dir qid 11

  ldb qid 1  qid_ldb_inflight_limit=256
  ldb qid 3  qid_ldb_inflight_limit=256
  ldb qid 8  qid_ldb_inflight_limit=256
  ldb qid 10 qid_ldb_inflight_limit=256

  vas VAS0:* credit_cnt=1024 dir_qidv0=1 dir_qidv2=1 dir_qidv9=1 dir_qidv11=1 ldb_qidv1=1 ldb_qidv3=1 ldb_qidv8=1 ldb_qidv10=1 

  dir pp 0  vas=VAS0 
  dir pp 2  vas=VAS0 
  dir pp 9  vas=VAS0 
  dir pp 11 vas=VAS0 

  ldb pp 1  vas=VAS0 
  ldb pp 3  vas=VAS0 
  ldb pp 8  vas=VAS0 
  ldb pp 10 vas=VAS0 
  
  ##PF+timer on dir cq[0,2]
  dir cq 0  cq_depth=16 gpa=sm 
  dir cq 2  cq_depth=16 gpa=sm 
  dir cq 9  cq_depth=16 gpa=sm 
  dir cq 11 cq_depth=16 gpa=sm 

  ##PF+timer on ldb cq[1,3,]
  ldb cq 1  cq_depth=16 gpa=sm qidv0=1 qidix0=1  
  ldb cq 3  cq_depth=16 gpa=sm qidv0=1 qidix0=3  

  ldb cq 8  cq_depth=16 gpa=sm qidv0=1 qidix0=8   
  ldb cq 10 cq_depth=16 gpa=sm qidv0=1 qidix0=10 

  ##DIR traffic on VF 1,3,5,7,9,11,13,15 CQ [9,11,13,15,17,19,21,23]
  ##vf 1  dir_vpp0_v=1 dir_vpp0_pp=9  dir_vqid0_v=1 dir_vqid0_qid=9  
  ##vf 3  dir_vpp1_v=1 dir_vpp1_pp=11 dir_vqid1_v=1 dir_vqid1_qid=11 
 
  vdev 1  dir_pp9_v=1    dir_vqid0_qid=9  
  vdev 3  dir_pp11_v=1   dir_vqid1_qid=11 

  ##LDB Traffic on VF 0,2,4,6,8,10,12,14 CQ [8,10,12,14,16,18,20,22]
  ##vf 0  ldb_vpp4_v=1 ldb_vpp4_pp=8  ldb_vqid4_v=1 ldb_vqid4_qid=8 
  ##vf 2  ldb_vpp5_v=1 ldb_vpp5_pp=10 ldb_vqid5_v=1 ldb_vqid5_qid=10

  vdev 0  ldb_pp8_v=1    ldb_vqid4_qid=8 
  vdev 2  ldb_pp10_v=1   ldb_vqid5_qid=10


cfg_end

##ingress alarm enable
rd hqm_system_csr.ingress_alarm_enable 0x00000000
wr hqm_system_csr.ingress_alarm_enable 0xffffffff
rd hqm_system_csr.ingress_alarm_enable 0x0000003f



