idle 400
###################################
# Read first part of PF header
rd hqm_pf_cfg_i.vendor_id
rd hqm_pf_cfg_i.device_id
rd hqm_pf_cfg_i.device_command
rd hqm_pf_cfg_i.device_status
###################################
# Setup CSR_PF BAR to a base address of 0x00000002_xxxxxxxx
wr hqm_pf_cfg_i.csr_bar_l 0x00000000
wr hqm_pf_cfg_i.csr_bar_u 0x00000002
###################################
# Setup FUNC_PF BAR to a base address of 0x00000001_xxxxxxxx
wr hqm_pf_cfg_i.func_bar_l 0x00000000
wr hqm_pf_cfg_i.func_bar_u 0x00000001
###################################
# Setup FUNC_VF BAR to a base address of 0x00000003_xxxxxxxx
#### wr hqm_pf_cfg_i.sriov_cap_func_bar_l 0x00000000
#### wr hqm_pf_cfg_i.sriov_cap_func_bar_u 0x00000003
###################################
# Enable PF memory operations
wr hqm_pf_cfg_i.device_command 0x6
rd hqm_pf_cfg_i.device_command
###################################
wr config_master.cfg_pm_pmcsr_disable.disable 0x0
rd config_master.cfg_pm_pmcsr_disable.disable 0x0
##
###poll to Wait for reset to be done
poll config_master.cfg_diagnostic_reset_status 0x800003ff 0x800003ff 500
###poll to Wait for unit_idle to be done
poll config_master.cfg_diagnostic_idle_status 0x0007ffff 0x0007ffff 500
###################################



###################################
# Setup LUTs used by HCWs

#mem_update      # initialize memories to hqm_cfg defaults using backdoor access

cfg_begin
   #MSIX programming
   msix_alarm 0 addr=0xbeefcafe0000110 data=0xbeefcace enable=1
  								    
   
   msix_cq  1  addr=0x2000cafebebc000 data=0xbb331000 is_ldb=1 cq=0
   msix_cq  2  addr=0x2010cafebebc010 data=0xbb331001 is_ldb=1 cq=1
   msix_cq  3  addr=0x2020cafebebc020 data=0xbb331002 is_ldb=1 cq=2
   msix_cq  4  addr=0x2030cafebebc030 data=0xbb331003 is_ldb=1 cq=3
   #msix_cq  5  addr=0x2040cafebebc040 data=0xbb331004 is_ldb=1 cq=4
   #msix_cq  6  addr=0x2050cafebebc050 data=0xbb331005 is_ldb=1 cq=5
   #msix_cq  7  addr=0x2060cafebebc060 data=0xbb331006 is_ldb=1 cq=6
   #msix_cq  8  addr=0x2070cafebebc070 data=0xbb331007 is_ldb=1 cq=7
   #msix_cq  9  addr=0x2080cafebebc080 data=0xbb331008 is_ldb=1 cq=8
   #msix_cq 10  addr=0x2090cafebebc090 data=0xbb331009 is_ldb=1 cq=9
   #msix_cq 11  addr=0x2100cafebebc100 data=0xbb331010 is_ldb=1 cq=10
   #msix_cq 12  addr=0x2110cafebebc110 data=0xbb331011 is_ldb=1 cq=11
   #msix_cq 13  addr=0x2120cafebebc120 data=0xbb331012 is_ldb=1 cq=12
   #msix_cq 14  addr=0x2130cafebebc130 data=0xbb331013 is_ldb=1 cq=13
   #msix_cq 15  addr=0x2140cafebebc140 data=0xbb331014 is_ldb=1 cq=14
   #msix_cq 16  addr=0x2150cafebebc150 data=0xbb331015 is_ldb=1 cq=15
   #msix_cq 17  addr=0x2160cafebebc160 data=0xbb331016 is_ldb=1 cq=16
   #msix_cq 18  addr=0x2170cafebebc170 data=0xbb331017 is_ldb=1 cq=17
   #msix_cq 19  addr=0x2180cafebebc180 data=0xbb331018 is_ldb=1 cq=18
   #msix_cq 20  addr=0x2190cafebebc190 data=0xbb331019 is_ldb=1 cq=19
   #msix_cq 21  addr=0x2200cafebebc200 data=0xbb331020 is_ldb=1 cq=20
   #msix_cq 22  addr=0x2210cafebebc210 data=0xbb331021 is_ldb=1 cq=21
   #msix_cq 23  addr=0x2220cafebebc220 data=0xbb331022 is_ldb=1 cq=22
   #msix_cq 24  addr=0x2230cafebebc230 data=0xbb331023 is_ldb=1 cq=23
   #msix_cq 25  addr=0x2240cafebebc240 data=0xbb331024 is_ldb=1 cq=24
   #msix_cq 26  addr=0x2250cafebebc250 data=0xbb331025 is_ldb=1 cq=25
   #msix_cq 27  addr=0x2260cafebebc260 data=0xbb331026 is_ldb=1 cq=26
   #msix_cq 28  addr=0x2270cafebebc270 data=0xbb331027 is_ldb=1 cq=27
   #msix_cq 29  addr=0x2280cafebebc280 data=0xbb331028 is_ldb=1 cq=28
   #msix_cq 30  addr=0x2290cafebebc290 data=0xbb331029 is_ldb=1 cq=29
   #msix_cq 31  addr=0x2300cafebebc300 data=0xbb331030 is_ldb=1 cq=30
   #msix_cq 32  addr=0x2310cafebebc310 data=0xbb331031 is_ldb=1 cq=31
 								    
   msix_cq 33 addr=0xab001111bce0000 data=0x55aa5a00 is_ldb=0 cq=0  
   msix_cq 34 addr=0xab011111cde0100 data=0x55aa5a01 is_ldb=0 cq=1   
   msix_cq 35 addr=0xab021111bce0200 data=0x55aa5a02 is_ldb=0 cq=2   
   msix_cq 36 addr=0xab031111cde0300 data=0x55aa5a03 is_ldb=0 cq=3   
   #msix_cq 37 addr=0xab041111bce0400 data=0x55aa5a04 is_ldb=0 cq=4   
   #msix_cq 38 addr=0xab051111cde0500 data=0x55aa5a05 is_ldb=0 cq=5   
   #msix_cq 39 addr=0xab061111bce0600 data=0x55aa5a06 is_ldb=0 cq=6   
   #msix_cq 40 addr=0xab071111cde0700 data=0x55aa5a07 is_ldb=0 cq=7   
   #msix_cq 41 addr=0xab081111bce0800 data=0x55aa5a08 is_ldb=0 cq=8   
   #msix_cq 42 addr=0xab091111cde0900 data=0x55aa5a09 is_ldb=0 cq=9   
   #msix_cq 43 addr=0xab101111bce1000 data=0x55aa5a10 is_ldb=0 cq=10  
   #msix_cq 44 addr=0xab111111cde1100 data=0x55aa5a11 is_ldb=0 cq=11  
   #msix_cq 45 addr=0xab121111bce1200 data=0x55aa5a12 is_ldb=0 cq=12  
   #msix_cq 46 addr=0xab131111cde1300 data=0x55aa5a13 is_ldb=0 cq=13  
   #msix_cq 47 addr=0xab141111bce1400 data=0x55aa5a14 is_ldb=0 cq=14  
   #msix_cq 48 addr=0xab151111cde1500 data=0x55aa5a15 is_ldb=0 cq=15  
   #msix_cq 49 addr=0xab161111bce1600 data=0x55aa5a16 is_ldb=0 cq=16  
   #msix_cq 50 addr=0xab171111cde1700 data=0x55aa5a17 is_ldb=0 cq=17  
   #msix_cq 51 addr=0xab181111bce1800 data=0x55aa5a18 is_ldb=0 cq=18  
   #msix_cq 52 addr=0xab191111cde1900 data=0x55aa5a19 is_ldb=0 cq=19  
   #msix_cq 53 addr=0xab201111bce2000 data=0x55aa5a20 is_ldb=0 cq=20  
   #msix_cq 54 addr=0xab211111cde2100 data=0x55aa5a21 is_ldb=0 cq=21  
   #msix_cq 55 addr=0xab221111bce2200 data=0x55aa5a22 is_ldb=0 cq=22  
   #msix_cq 56 addr=0xab231111cde2300 data=0x55aa5a23 is_ldb=0 cq=23  
   #msix_cq 57 addr=0xab241111bce2400 data=0x55aa5a24 is_ldb=0 cq=24  
   #msix_cq 58 addr=0xab251111cde2500 data=0x55aa5a25 is_ldb=0 cq=25  
   #msix_cq 59 addr=0xab261111bce2600 data=0x55aa5a26 is_ldb=0 cq=26  
   #msix_cq 60 addr=0xab271111cde2700 data=0x55aa5a27 is_ldb=0 cq=27  
   #msix_cq 61 addr=0xab281111bce2800 data=0x55aa5a28 is_ldb=0 cq=28  
   #msix_cq 62 addr=0xab291111cde2900 data=0x55aa5a29 is_ldb=0 cq=29  
   #msix_cq 63 addr=0xab301111bce3000 data=0x55aa5a30 is_ldb=0 cq=30  
   #msix_cq 64 addr=0xab311111cde3100 data=0x55aa5a31 is_ldb=0 cq=31  
   
   
  dir qid 0
  dir qid 1
  dir qid 2
  dir qid 3

  ldb qid 0 qid_ldb_inflight_limit=512 fid_cfg_v=1 fid_limit=1024
  ldb qid 1 qid_ldb_inflight_limit=512 fid_cfg_v=1 fid_limit=1024
  ldb qid 2 qid_ldb_inflight_limit=512 fid_cfg_v=1 fid_limit=1024
  ldb qid 3 qid_ldb_inflight_limit=512 fid_cfg_v=1 fid_limit=1024

  vas 0  credit_cnt=4096 
  vas 0  dir_qidv0=1 dir_qidv1=1 dir_qidv2=1 dir_qidv3=1
  vas 0  ldb_qidv0=1 ldb_qidv1=1 ldb_qidv2=1 ldb_qidv3=1

  dir pp 0  vas=0
  dir pp 1  vas=0
  dir pp 2  vas=0
  dir pp 3  vas=0

  dir cq 0  cq_depth=16 gpa=sm cq_timer_intr_thresh=2 cq_timer_intr_ena=0 cq_depth_intr_thresh=15 cq_depth_intr_ena=1  cq_cwdt_intr_ena=0
  dir cq 1  cq_depth=16 gpa=sm cq_timer_intr_thresh=2 cq_timer_intr_ena=0 cq_depth_intr_thresh=15 cq_depth_intr_ena=1  cq_cwdt_intr_ena=0
  dir cq 2  cq_depth=16 gpa=sm cq_timer_intr_thresh=2 cq_timer_intr_ena=0 cq_depth_intr_thresh=15 cq_depth_intr_ena=1  cq_cwdt_intr_ena=0
  dir cq 3  cq_depth=16 gpa=sm cq_timer_intr_thresh=2 cq_timer_intr_ena=0 cq_depth_intr_thresh=15 cq_depth_intr_ena=1  cq_cwdt_intr_ena=0

  ldb pp 0  vas=0
  ldb pp 1  vas=0
  ldb pp 2  vas=0
  ldb pp 3  vas=0

  ldb cq 0  wu_limit=4097 cq_depth=16 gpa=sm hist_list_base=0x000 hist_list_limit=0x1ff qidv0=1 qidix0=0 pri0=0 qidv1=0 qidix1=1 pri1=0 qidv2=0 qidix2=2 pri0=0 qidv3=0 qidix3=3 pri3=0 cq_timer_intr_thresh=2 cq_timer_intr_ena=0 cq_depth_intr_thresh=15 cq_depth_intr_ena=1  cq_cwdt_intr_ena=0
  ldb cq 1  wu_limit=4095 cq_depth=16 gpa=sm hist_list_base=0x200 hist_list_limit=0x3ff qidv0=0 qidix0=0 pri0=0 qidv1=1 qidix1=1 pri1=0 qidv2=0 qidix2=2 pri0=0 qidv3=0 qidix3=3 pri3=0 cq_timer_intr_thresh=2 cq_timer_intr_ena=0 cq_depth_intr_thresh=15 cq_depth_intr_ena=1  cq_cwdt_intr_ena=0
  ldb cq 2  wu_limit=4095 cq_depth=16 gpa=sm hist_list_base=0x400 hist_list_limit=0x5ff qidv0=0 qidix0=0 pri0=0 qidv1=0 qidix1=1 pri1=0 qidv2=1 qidix2=2 pri0=0 qidv3=0 qidix3=3 pri3=0 cq_timer_intr_thresh=2 cq_timer_intr_ena=0 cq_depth_intr_thresh=15 cq_depth_intr_ena=1  cq_cwdt_intr_ena=0
  ldb cq 3  wu_limit=4097 cq_depth=16 gpa=sm hist_list_base=0x600 hist_list_limit=0x7ff qidv0=0 qidix0=0 pri0=0 qidv1=0 qidix1=1 pri1=0 qidv2=0 qidix2=2 pri0=0 qidv3=1 qidix3=3 pri3=0 cq_timer_intr_thresh=2 cq_timer_intr_ena=0 cq_depth_intr_thresh=15 cq_depth_intr_ena=1  cq_cwdt_intr_ena=0


cfg_end

##ingress alarm enable
#wr hqm_system_csr.ingress_alarm_enable 0xffffffff
#rd hqm_system_csr.ingress_alarm_enable 0x0000003f



wr credit_hist_pipe.cfg_dir_cq_intr_armed0 0xffffffff
wr credit_hist_pipe.cfg_dir_cq_intr_armed1 0xffffffff

wr credit_hist_pipe.cfg_dir_cq_timer_ctl.enb 1
wr credit_hist_pipe.cfg_dir_cq_timer_ctl.sample_interval 1

wr credit_hist_pipe.cfg_ldb_cq_intr_armed0 0xffffffff
wr credit_hist_pipe.cfg_ldb_cq_intr_armed1 0xffffffff
wr credit_hist_pipe.cfg_ldb_cq_timer_ctl.enb 1
wr credit_hist_pipe.cfg_ldb_cq_timer_ctl.sample_interval 1

rd credit_hist_pipe.cfg_dir_cq_intr_armed0
rd credit_hist_pipe.cfg_dir_cq_intr_armed1

rd credit_hist_pipe.cfg_ldb_cq_intr_armed0
rd credit_hist_pipe.cfg_ldb_cq_intr_armed1


