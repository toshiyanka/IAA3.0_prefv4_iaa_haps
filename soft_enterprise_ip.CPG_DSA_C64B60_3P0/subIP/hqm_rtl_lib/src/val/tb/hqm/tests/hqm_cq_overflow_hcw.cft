HCW DIR:63 qe_valid=1 qe_orsp=0 qe_uhl=0 cq_pop=0 meas=0 lockid=0x303 msgtype=0 qpri=0 qtype=dir qid=63 dsi=0x302
idle 100
HCW DIR:63 qe_valid=1 qe_orsp=0 qe_uhl=0 cq_pop=0 meas=0 lockid=0x303 msgtype=0 qpri=0 qtype=dir qid=63 dsi=0x302
idle 100
HCW DIR:63 qe_valid=1 qe_orsp=0 qe_uhl=0 cq_pop=0 meas=0 lockid=0x303 msgtype=0 qpri=0 qtype=dir qid=63 dsi=0x302
idle 100
HCW DIR:63 qe_valid=1 qe_orsp=0 qe_uhl=0 cq_pop=0 meas=0 lockid=0x303 msgtype=0 qpri=0 qtype=dir qid=63 dsi=0x302
idle 100

# This should cause an error when the cq address wraps

HCW DIR:63 qe_valid=1 qe_orsp=0 qe_uhl=0 cq_pop=0 meas=0 lockid=0x303 msgtype=0 qpri=0 qtype=dir qid=63 dsi=0x302 ingress_drop=1
msix_alarm_wait 500

# Return tokens

HCW DIR:63 qe_valid=0 qe_orsp=0 qe_uhl=0 cq_pop=1 meas=0 lockid=0x004 msgtype=0 qpri=0 qtype=dir qid=0 dsi=0x302
IDLE 100

# Check alarm syndrome was cq address overflow

rd hqm_system_csr.alarm_err         0x00000001
wr hqm_system_csr.alarm_err         0x00000001
rd hqm_system_csr.alarm_err         0x00000000

rd hqm_system_csr.alarm_hw_synd     0x8047853f # v=1 src=0 unit=1 aid=08 cls=2 alarm=1 rtype=cq rid=cq
wr hqm_system_csr.alarm_hw_synd     0x80000000
rd hqm_system_csr.alarm_hw_synd     0x0047853f

rd hqm_system_csr.msix_ack          0x00000001
wr hqm_system_csr.msix_ack          0x00000001
rd hqm_system_csr.msix_ack          0x00000000

# Input HCWs
rd hqm_system_csr.hqm_system_cnt_0  0x00000006
rd hqm_system_csr.hqm_system_cnt_1  0x00000000
# Output HCWs
rd hqm_system_csr.hqm_system_cnt_2  0x00000006
rd hqm_system_csr.hqm_system_cnt_3  0x00000000
# Dropped HCWs
rd hqm_system_csr.hqm_system_cnt_4  0x00000000
rd hqm_system_csr.hqm_system_cnt_5  0x00000000
# Sheduled HCWs received
rd hqm_system_csr.hqm_system_cnt_6  0x00000005
rd hqm_system_csr.hqm_system_cnt_7  0x00000000
# Sheduled HCWs -> WBUF
rd hqm_system_csr.hqm_system_cnt_8  0x00000005
rd hqm_system_csr.hqm_system_cnt_9  0x00000000
# MSI-Xs
rd hqm_system_csr.hqm_system_cnt_14 0x00000001
rd hqm_system_csr.hqm_system_cnt_15 0x00000000
# IOSF writes
rd hqm_system_csr.hqm_system_cnt_16 0x00000005  # 4 SCHs + 1 MSI-X
rd hqm_system_csr.hqm_system_cnt_17 0x00000000
# IOSF writes dropped
rd hqm_system_csr.hqm_system_cnt_18 0x00000001
rd hqm_system_csr.hqm_system_cnt_19 0x00000000

