idle 400
###################################
# Read first part of PF header
rd hqm_pf_cfg_i.vendor_id
rd hqm_pf_cfg_i.device_id
rd hqm_pf_cfg_i.device_command
rd hqm_pf_cfg_i.device_status
###################################
# Setup FUNC_PF BAR to a base address of 0x00000001_xxxxxxxx
wr hqm_pf_cfg_i.func_bar_l 0x00000000
wr hqm_pf_cfg_i.func_bar_u 0x00000001
###################################
# Setup CSR_PF BAR to a base address of 0x00000002_xxxxxxxx
wr hqm_pf_cfg_i.csr_bar_l 0x00000000
wr hqm_pf_cfg_i.csr_bar_u 0x00000002
###################################
# Enable PF memory operations
wr hqm_pf_cfg_i.device_command 0x6
rd hqm_pf_cfg_i.device_command
###################################
# Setup FUNC_VF BAR to a base address of 0x00000003_xxxxxxxx
###################################
# 16 VFs
###################################
# Enable VF and VF memory operations
################################### 
###################################
# Initial values
 
# Setup LUTs
wr hqm_system_csr.dm_vf_vpp2pp[0]   0x000000c0
wr hqm_system_csr.dm_vf_vpp2pp[1]   0x000000c1
wr hqm_system_csr.dm_vf_vpp2pp[2]   0x000000c2
wr hqm_system_csr.dm_vf_vpp2pp[3]   0x000000c3
wr hqm_system_csr.dm_vf_vpp2pp[4]   0x000000c4
wr hqm_system_csr.dm_vf_vpp2pp[5]   0x000000c5
wr hqm_system_csr.dm_vf_vpp2pp[6]   0x000000c6
wr hqm_system_csr.dm_vf_vpp2pp[7]   0x000000c7
wr hqm_system_csr.dm_vf_vpp2pp[8]   0x000000c8
wr hqm_system_csr.dm_vf_vpp2pp[9]   0x000000c9
wr hqm_system_csr.dm_vf_vpp2pp[10]  0x000000ca
wr hqm_system_csr.dm_vf_vpp2pp[11]  0x000000cb
wr hqm_system_csr.dm_vf_vpp2pp[12]  0x000000cc
wr hqm_system_csr.dm_vf_vpp2pp[13]  0x000000cd
wr hqm_system_csr.dm_vf_vpp2pp[14]  0x000000ce
wr hqm_system_csr.dm_vf_vpp2pp[15]  0x000000cf
wr hqm_system_csr.dm_vf_vpp2pp[16]  0x000000d0
wr hqm_system_csr.dm_vf_vpp2pp[17]  0x000000d1
wr hqm_system_csr.dm_vf_vpp2pp[18]  0x000000d2
wr hqm_system_csr.dm_vf_vpp2pp[19]  0x000000d3
wr hqm_system_csr.dm_vf_vpp2pp[20]  0x000000d4
wr hqm_system_csr.dm_vf_vpp2pp[21]  0x000000d5
wr hqm_system_csr.dm_vf_vpp2pp[22]  0x000000d6
wr hqm_system_csr.dm_vf_vpp2pp[23]  0x000000d7
wr hqm_system_csr.dm_vf_vpp2pp[24]  0x000000d8
wr hqm_system_csr.dm_vf_vpp2pp[25]  0x000000d9
wr hqm_system_csr.dm_vf_vpp2pp[26]  0x000000da
wr hqm_system_csr.dm_vf_vpp2pp[27]  0x000000db
wr hqm_system_csr.dm_vf_vpp2pp[28]  0x000000dc
wr hqm_system_csr.dm_vf_vpp2pp[29]  0x000000dd
wr hqm_system_csr.dm_vf_vpp2pp[30]  0x000000de
wr hqm_system_csr.dm_vf_vpp2pp[31]  0x000000df
wr hqm_system_csr.dm_vf_vpp2pp[32]  0x000000e0
wr hqm_system_csr.dm_vf_vpp2pp[33]  0x000000e1
wr hqm_system_csr.dm_vf_vpp2pp[34]  0x000000e2
wr hqm_system_csr.dm_vf_vpp2pp[35]  0x000000e3
wr hqm_system_csr.dm_vf_vpp2pp[36]  0x000000e4
wr hqm_system_csr.dm_vf_vpp2pp[37]  0x000000e5
wr hqm_system_csr.dm_vf_vpp2pp[38]  0x000000e6
wr hqm_system_csr.dm_vf_vpp2pp[39]  0x000000e7
wr hqm_system_csr.dm_vf_vpp2pp[40]  0x000000e8
wr hqm_system_csr.dm_vf_vpp2pp[41]  0x000000e9
wr hqm_system_csr.dm_vf_vpp2pp[42]  0x000000ea
wr hqm_system_csr.dm_vf_vpp2pp[43]  0x000000eb
wr hqm_system_csr.dm_vf_vpp2pp[44]  0x000000ec
wr hqm_system_csr.dm_vf_vpp2pp[45]  0x000000ed
wr hqm_system_csr.dm_vf_vpp2pp[46]  0x000000ee
wr hqm_system_csr.dm_vf_vpp2pp[47]  0x000000ef
wr hqm_system_csr.dm_vf_vpp2pp[48]  0x000000f0
wr hqm_system_csr.dm_vf_vpp2pp[49]  0x000000f1
wr hqm_system_csr.dm_vf_vpp2pp[50]  0x000000f2
wr hqm_system_csr.dm_vf_vpp2pp[51]  0x000000f3
wr hqm_system_csr.dm_vf_vpp2pp[52]  0x000000f4
wr hqm_system_csr.dm_vf_vpp2pp[53]  0x000000f5
wr hqm_system_csr.dm_vf_vpp2pp[54]  0x000000f6
wr hqm_system_csr.dm_vf_vpp2pp[55]  0x000000f7
wr hqm_system_csr.dm_vf_vpp2pp[56]  0x000000f8
wr hqm_system_csr.dm_vf_vpp2pp[57]  0x000000f9
wr hqm_system_csr.dm_vf_vpp2pp[58]  0x000000fa
wr hqm_system_csr.dm_vf_vpp2pp[59]  0x000000fb
wr hqm_system_csr.dm_vf_vpp2pp[60]  0x000000fc
wr hqm_system_csr.dm_vf_vpp2pp[61]  0x000000fd
wr hqm_system_csr.dm_vf_vpp2pp[62]  0x000000fe
wr hqm_system_csr.dm_vf_vpp2pp[63]  0x000000ff
wr hqm_system_csr.dm_vf_vpp2pp[65]  0x000000c1
wr hqm_system_csr.dm_vf_vpp2pp[129] 0x000000c2
wr hqm_system_csr.dm_vf_vpp2pp[193] 0x000000c3
wr hqm_system_csr.dm_vf_vpp2pp[257] 0x000000c4
wr hqm_system_csr.dm_vf_vpp2pp[321] 0x000000c5
wr hqm_system_csr.dm_vf_vpp2pp[385] 0x000000c6
wr hqm_system_csr.dm_vf_vpp2pp[449] 0x000000c7
wr hqm_system_csr.dm_vf_vpp2pp[513] 0x000000c8
wr hqm_system_csr.dm_vf_vpp2pp[577] 0x000000c9
wr hqm_system_csr.dm_vf_vpp2pp[641] 0x000000ca
wr hqm_system_csr.dm_vf_vpp2pp[705] 0x000000cb
wr hqm_system_csr.dm_vf_vpp2pp[769] 0x000000cc
wr hqm_system_csr.dm_vf_vpp2pp[833] 0x000000cd
wr hqm_system_csr.dm_vf_vpp2pp[897] 0x000000ce
wr hqm_system_csr.dm_vf_vpp2pp[961] 0x000000cf
#
wr hqm_system_csr.dm_pp2vas[0]      0x00000020
wr hqm_system_csr.dm_pp2vas[1]      0x00000021
wr hqm_system_csr.dm_pp2vas[2]      0x00000022
wr hqm_system_csr.dm_pp2vas[3]      0x00000023
wr hqm_system_csr.dm_pp2vas[4]      0x00000024
wr hqm_system_csr.dm_pp2vas[5]      0x00000025
wr hqm_system_csr.dm_pp2vas[6]      0x00000026
wr hqm_system_csr.dm_pp2vas[7]      0x00000027
wr hqm_system_csr.dm_pp2vas[8]      0x00000028
wr hqm_system_csr.dm_pp2vas[9]      0x00000029
wr hqm_system_csr.dm_pp2vas[10]     0x0000002a
wr hqm_system_csr.dm_pp2vas[11]     0x0000002b
wr hqm_system_csr.dm_pp2vas[12]     0x0000002c
wr hqm_system_csr.dm_pp2vas[13]     0x0000002d
wr hqm_system_csr.dm_pp2vas[14]     0x0000002e
wr hqm_system_csr.dm_pp2vas[15]     0x0000002f
wr hqm_system_csr.dm_pp2vas[16]     0x00000030
wr hqm_system_csr.dm_pp2vas[17]     0x00000031
wr hqm_system_csr.dm_pp2vas[18]     0x00000032
wr hqm_system_csr.dm_pp2vas[19]     0x00000033
wr hqm_system_csr.dm_pp2vas[20]     0x00000034
wr hqm_system_csr.dm_pp2vas[21]     0x00000035
wr hqm_system_csr.dm_pp2vas[22]     0x00000036
wr hqm_system_csr.dm_pp2vas[23]     0x00000037
wr hqm_system_csr.dm_pp2vas[24]     0x00000038
wr hqm_system_csr.dm_pp2vas[25]     0x00000039
wr hqm_system_csr.dm_pp2vas[26]     0x0000003a
wr hqm_system_csr.dm_pp2vas[27]     0x0000003b
wr hqm_system_csr.dm_pp2vas[28]     0x0000003c
wr hqm_system_csr.dm_pp2vas[29]     0x0000003d
wr hqm_system_csr.dm_pp2vas[30]     0x0000003e
wr hqm_system_csr.dm_pp2vas[31]     0x0000003f
wr hqm_system_csr.dm_pp2vas[32]     0x00000020
wr hqm_system_csr.dm_pp2vas[33]     0x00000021
wr hqm_system_csr.dm_pp2vas[34]     0x00000022
wr hqm_system_csr.dm_pp2vas[35]     0x00000023
wr hqm_system_csr.dm_pp2vas[36]     0x00000024
wr hqm_system_csr.dm_pp2vas[37]     0x00000025
wr hqm_system_csr.dm_pp2vas[38]     0x00000026
wr hqm_system_csr.dm_pp2vas[39]     0x00000027
wr hqm_system_csr.dm_pp2vas[40]     0x00000028
wr hqm_system_csr.dm_pp2vas[41]     0x00000029
wr hqm_system_csr.dm_pp2vas[42]     0x0000002a
wr hqm_system_csr.dm_pp2vas[43]     0x0000002b
wr hqm_system_csr.dm_pp2vas[44]     0x0000002c
wr hqm_system_csr.dm_pp2vas[45]     0x0000002d
wr hqm_system_csr.dm_pp2vas[46]     0x0000002e
wr hqm_system_csr.dm_pp2vas[47]     0x0000002f
wr hqm_system_csr.dm_pp2vas[48]     0x00000030
wr hqm_system_csr.dm_pp2vas[49]     0x00000031
wr hqm_system_csr.dm_pp2vas[50]     0x00000032
wr hqm_system_csr.dm_pp2vas[51]     0x00000033
wr hqm_system_csr.dm_pp2vas[52]     0x00000034
wr hqm_system_csr.dm_pp2vas[53]     0x00000035
wr hqm_system_csr.dm_pp2vas[54]     0x00000036
wr hqm_system_csr.dm_pp2vas[55]     0x00000037
wr hqm_system_csr.dm_pp2vas[56]     0x00000038
wr hqm_system_csr.dm_pp2vas[57]     0x00000039
wr hqm_system_csr.dm_pp2vas[58]     0x0000003a
wr hqm_system_csr.dm_pp2vas[59]     0x0000003b
wr hqm_system_csr.dm_pp2vas[60]     0x0000003c
wr hqm_system_csr.dm_pp2vas[61]     0x0000003d
wr hqm_system_csr.dm_pp2vas[62]     0x0000003e
wr hqm_system_csr.dm_pp2vas[63]     0x0000003f
#
wr dm_vpa_unit.cfg_vpa_vas_is_pa[0] 1
wr dm_vpa_unit.cfg_vpa_vas_is_pa[1] 1
wr dm_vpa_unit.cfg_vpa_vas_is_pa[2] 1
wr dm_vpa_unit.cfg_vpa_vas_is_pa[3] 1
wr dm_vpa_unit.cfg_vpa_vas_is_pa[4] 1
wr dm_vpa_unit.cfg_vpa_vas_is_pa[5] 1
wr dm_vpa_unit.cfg_vpa_vas_is_pa[6] 1
wr dm_vpa_unit.cfg_vpa_vas_is_pa[7] 1
wr dm_vpa_unit.cfg_vpa_vas_is_pa[8] 1
wr dm_vpa_unit.cfg_vpa_vas_is_pa[9] 1
wr dm_vpa_unit.cfg_vpa_vas_is_pa[10] 1
wr dm_vpa_unit.cfg_vpa_vas_is_pa[11] 1
wr dm_vpa_unit.cfg_vpa_vas_is_pa[12] 1
wr dm_vpa_unit.cfg_vpa_vas_is_pa[13] 1
wr dm_vpa_unit.cfg_vpa_vas_is_pa[14] 1
wr dm_vpa_unit.cfg_vpa_vas_is_pa[15] 1
wr dm_vpa_unit.cfg_vpa_vas_is_pa[16] 1
wr dm_vpa_unit.cfg_vpa_vas_is_pa[17] 1
wr dm_vpa_unit.cfg_vpa_vas_is_pa[18] 1
wr dm_vpa_unit.cfg_vpa_vas_is_pa[19] 1
wr dm_vpa_unit.cfg_vpa_vas_is_pa[20] 1
wr dm_vpa_unit.cfg_vpa_vas_is_pa[21] 1
wr dm_vpa_unit.cfg_vpa_vas_is_pa[22] 1
wr dm_vpa_unit.cfg_vpa_vas_is_pa[23] 1
wr dm_vpa_unit.cfg_vpa_vas_is_pa[24] 1
wr dm_vpa_unit.cfg_vpa_vas_is_pa[25] 1
wr dm_vpa_unit.cfg_vpa_vas_is_pa[26] 1
wr dm_vpa_unit.cfg_vpa_vas_is_pa[27] 1
wr dm_vpa_unit.cfg_vpa_vas_is_pa[28] 1
wr dm_vpa_unit.cfg_vpa_vas_is_pa[29] 1
wr dm_vpa_unit.cfg_vpa_vas_is_pa[30] 1
wr dm_vpa_unit.cfg_vpa_vas_is_pa[31] 1
################################################
################################################
################################################
###################################
###################################
#
#
idle 100
#
#
#  
#Step1_Normal HQM_FEATURE regsiters
#
rd hqm_system_csr.parity_ctl	
wr hqm_system_csr.parity_ctl		      0x0049
rd hqm_system_csr.parity_ctl		      0x0049

#Step2_not in HQM_FEATURE list 		      
rd hqm_system_csr.aw_smon_configuration1[0]
wr hqm_system_csr.aw_smon_configuration1[0]	      0x0039
rd hqm_system_csr.aw_smon_configuration1[0]	      0x0039
	      
rd hqm_system_csr.aw_smon_compare0[0]
wr hqm_system_csr.aw_smon_compare0[0]		      0x003a
rd hqm_system_csr.aw_smon_compare0[0]		      0x003a
 	      
rd hqm_system_csr.aw_smon_compare1[0] 
wr hqm_system_csr.aw_smon_compare1[0] 		      0x003b
rd hqm_system_csr.aw_smon_compare1[0] 		      0x003b
	      
rd hqm_system_csr.aw_smon_activitycounter0[0] 
wr hqm_system_csr.aw_smon_activitycounter0[0] 	      0x003c
rd hqm_system_csr.aw_smon_activitycounter0[0] 	      0x003c
      
rd hqm_system_csr.aw_smon_activitycounter1[0] 
wr hqm_system_csr.aw_smon_activitycounter1[0] 	      0x003d
rd hqm_system_csr.aw_smon_activitycounter1[0]	      0x003d
 
      
rd hqm_system_csr.aw_smon_timer[0]	
wr hqm_system_csr.aw_smon_timer[0]		      0x003e
rd hqm_system_csr.aw_smon_timer[0]		      0x003e
	      
rd hqm_system_csr.aw_smon_maximum_timer[0]	
wr hqm_system_csr.aw_smon_maximum_timer[0]	      0x003f
rd hqm_system_csr.aw_smon_maximum_timer[0]	      0x003f
#
###################################
###################################
#
#
idle 100
#
#Step3_Default_Value_of_hqm_csr_cp_lo/hi_OS_W
#
#hqm_system_csr.hqm_csr_cp_lo                                                     	 0x00000000 0x01000218   (OS_W)
#hqm_system_csr.hqm_csr_cp_hi                                                     	 0x00000004 0x00000400   (OS_W)
#hqm_system_csr.hqm_csr_rac_lo                                                    	 0x00000008 0xffffffff   (OS_W)
#hqm_system_csr.hqm_csr_rac_hi                                                    	 0x0000000c 0xffffffff   (OS_W)
#hqm_system_csr.hqm_csr_wac_lo                                                    	 0x00000010 0x0300021f   (OS_W)
#hqm_system_csr.hqm_csr_wac_hi                                                    	 0x00000014 0x20000400   (OS_W)
#
rd hqm_system_csr.hqm_csr_cp_lo		     	      0x01000218
rd hqm_system_csr.hqm_csr_cp_hi		      	      0x00000400
rd hqm_system_csr.hqm_csr_rac_lo		      0xffffffff 
rd hqm_system_csr.hqm_csr_rac_hi		      0xffffffff 
rd hqm_system_csr.hqm_csr_wac_lo		      0x0300021f 
rd hqm_system_csr.hqm_csr_wac_hi		      0x20000c00
#
#
#
#
idle 100
#
#Step3.1_WRRD_Value_of_csr_cp_lo/hi (OS_W) using SAI HOSTIA_BOOT_SAI
#
# 
#
sai hostia_boot_sai     # Should be SAI index 4
#
idle 100
#
wr hqm_system_csr.hqm_csr_cp_lo		      0xFFFFFFFF
rd hqm_system_csr.hqm_csr_cp_lo		      0xFFFFFFFF
wr hqm_system_csr.hqm_csr_cp_hi		      0xFFFFFFFF
rd hqm_system_csr.hqm_csr_cp_hi		      0xFFFFFFFF

#
wr hqm_system_csr.hqm_csr_cp_lo		      0x5a5a5a5a
rd hqm_system_csr.hqm_csr_cp_lo		      0x5a5a5a5a
wr hqm_system_csr.hqm_csr_cp_hi		      0xa5a5a5a5
rd hqm_system_csr.hqm_csr_cp_hi		      0xa5a5a5a5

###################################
###################################
#
#
#
idle 100
#
#Step10.2_WRRD_Value_of_csr_cp_lo/hi (OS_W) using SAI HOSTIA_SUNPASS_SAI
#
# 
wr hqm_system_csr.hqm_csr_rac_lo	       0xFFFFFFFF
rd hqm_system_csr.hqm_csr_rac_lo	       0xFFFFFFFF
wr hqm_system_csr.hqm_csr_rac_hi	       0xFFFFFFFF
rd hqm_system_csr.hqm_csr_rac_hi	       0xFFFFFFFF
#
wr hqm_system_csr.hqm_csr_rac_lo	       0x3b3b3b3b
rd hqm_system_csr.hqm_csr_rac_lo	       0x3b3b3b3b
wr hqm_system_csr.hqm_csr_rac_hi	       0xb3b3b3b3
rd hqm_system_csr.hqm_csr_rac_hi	       0xb3b3b3b3
#
# 
wr hqm_system_csr.hqm_csr_wac_lo	       0xFFFFFFFF
rd hqm_system_csr.hqm_csr_wac_lo	       0xFFFFFFFF
wr hqm_system_csr.hqm_csr_wac_hi	       0xFFFFFFFF
rd hqm_system_csr.hqm_csr_wac_hi	       0xFFFFFFFF
#
wr hqm_system_csr.hqm_csr_wac_lo	       0x4d4d4d4d
rd hqm_system_csr.hqm_csr_wac_lo	       0x4d4d4d4d
wr hqm_system_csr.hqm_csr_wac_hi	       0xd4d4d4d4
rd hqm_system_csr.hqm_csr_wac_hi	       0xd4d4d4d4
################################################
################################################
################################################
#
#
idle 100
#
#
##
##Step20.0 Issue FLR RESET
##
###################################
##----------- FLR ---------------## 
###################################
wr hqm_pf_cfg_i.device_command 0x6
rd hqm_pf_cfg_i.pcie_cap_device_control 0x0020 0x8000 
poll hqm_pf_cfg_i.pcie_cap_device_status 0x0 0x00200000 10000

##Disable MSI in order to avoid any unattended INT later##
wr  hqm_pf_cfg_i.msix_cap_control 0x0000

##Disable Bus Master, INTX and Mem Txn enable bit from device_command##
wr  hqm_pf_cfg_i.device_command 0x400
wr  hqm_pf_cfg_i.pcie_cap_device_control.startflr 0x1
idle 7000
rd hqm_pf_cfg_i.pcie_cap_device_control 0x0000 0x8000
###################################
# Read first part of PF header
rd hqm_pf_cfg_i.vendor_id
rd hqm_pf_cfg_i.device_id
rd hqm_pf_cfg_i.device_command
rd hqm_pf_cfg_i.device_status
###################################
# Setup FUNC_PF BAR to a base address of 0x00000001_xxxxxxxx
wr hqm_pf_cfg_i.func_bar_l 0x00000000
wr hqm_pf_cfg_i.func_bar_u 0x00000001
###################################
# Setup CSR_PF BAR to a base address of 0x00000002_xxxxxxxx
wr hqm_pf_cfg_i.csr_bar_l 0x00000000
wr hqm_pf_cfg_i.csr_bar_u 0x00000002
###################################
wr hqm_pf_cfg_i.device_command 0x6
rd hqm_pf_cfg_i.device_command
###################################
# Setup FUNC_VF BAR to a base address of 0x00000000_xxxxxxxx
###################################
# 00 VFs
###################################
# Enable VF and VF memory operations
###################################



################################################
################################################
################################################
#
#
idle 1000
#
#
##
##Step20.1 After_FLRRESET, Check HQM_FEATURE Registers (not reset by FLR_RESET)
##
#
# 
#more new HQM_FEATURE regsiters 
rd hqm_system_csr.parity_ctl		      0x0049
#
##
##Step20.2 After_FLRRESET, Check registers not in HQM_FEATURE (reset by FLR_RESET)
##
rd hqm_system_csr.aw_smon_configuration1[0]	      0x0
rd hqm_system_csr.aw_smon_compare0[0]		      0x0
rd hqm_system_csr.aw_smon_compare1[0] 		      0x0
rd hqm_system_csr.aw_smon_activitycounter0[0] 	      0x0
rd hqm_system_csr.aw_smon_activitycounter1[0]	      0x0
rd hqm_system_csr.aw_smon_timer[0]		      0x0
rd hqm_system_csr.aw_smon_maximum_timer[0]	      0x0
#
#
##
##Step20.2 Check HQM_FEATURE Registers After FLR_RESET (not reset by FLR_RESET)
##
# 
 
#
##
##Step20.3 Check HQM_FEATURE Registers After FLR_RESET (not reset by FLR_RESET)
##
#
rd hqm_system_csr.hqm_csr_cp_lo		       0x5a5a5a5a 
rd hqm_system_csr.hqm_csr_cp_hi		       0xa5a5a5a5
rd hqm_system_csr.hqm_csr_rac_lo	       0x3b3b3b3b 
rd hqm_system_csr.hqm_csr_rac_hi	       0xb3b3b3b3 
rd hqm_system_csr.hqm_csr_wac_lo	       0x4d4d4d4d 
rd hqm_system_csr.hqm_csr_wac_hi	       0xd4d4d4d4
