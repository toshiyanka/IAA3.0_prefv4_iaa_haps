########################################
## 4-DIR PP/CQ for Timer/Threshold -PF
## 4-DIR PP/CQ for Timer/Threshold -VF
## 4-LDB PP/CQ for Timer/Threshold -PF
## 4-LDB PP/CQ for Timer/Threshold -VF
## 4-DIR PP/CQ for Normal Traffic -PF 
## 4-DIR PP/CQ for Normal Traffic -VF 
## 4-LDB PP/CQ for Normal Traffic -PF 
## 4-LDB PP/CQ for Normal Traffic -VF 
########################################



cfg_begin


## 4-PF, 4-VF
  dir qid DQID0:*
  dir qid DQID1:*
  dir qid DQID2:*
  dir qid DQID3:*
  dir qid DQID4:*
  dir qid DQID5:*
  dir qid DQID6:*
  dir qid DQID7:*

## 4-PF , 4-VF -VAS1
  dir qid DQID8:*
  dir qid DQID9:*
  dir qid DQID10:*
  dir qid DQID11:*
  dir qid DQID12:*
  dir qid DQID13:*
  dir qid DQID14:*
  dir qid DQID15:*


## 4-PF , 4-VF -VAS0
  ldb qid LQID0:*   qid_ldb_inflight_limit=256
  ldb qid LQID1:*   qid_ldb_inflight_limit=256
  ldb qid LQID2:*   qid_ldb_inflight_limit=256
  ldb qid LQID3:*   qid_ldb_inflight_limit=256
  ldb qid LQID4:*   qid_ldb_inflight_limit=256
  ldb qid LQID5:*   qid_ldb_inflight_limit=256
  ldb qid LQID6:*   qid_ldb_inflight_limit=256
  ldb qid LQID7:*   qid_ldb_inflight_limit=256

## 4-PF , 4-VF -VAS1
  ldb qid LQID8:*   qid_ldb_inflight_limit=256
  ldb qid LQID9:*   qid_ldb_inflight_limit=256
  ldb qid LQID10:*  qid_ldb_inflight_limit=256
  ldb qid LQID11:*  qid_ldb_inflight_limit=256
  ldb qid LQID12:*  qid_ldb_inflight_limit=256
  ldb qid LQID13:*  qid_ldb_inflight_limit=256
  ldb qid LQID14:*  qid_ldb_inflight_limit=256
  ldb qid LQID15:*  qid_ldb_inflight_limit=256

  vas VAS0:* dir_qidv:DQID0=1  dir_qidv:DQID1=1  dir_qidv:DQID2=1  dir_qidv:DQID3=1  dir_qidv:DQID4=1  dir_qidv:DQID5=1  dir_qidv:DQID6=1  dir_qidv:DQID7=1 credit_cnt=4096
  vas VAS0   ldb_qidv:LQID0=1  ldb_qidv:LQID1=1  ldb_qidv:LQID2=1  ldb_qidv:LQID3=1  ldb_qidv:LQID4=1  ldb_qidv:LQID5=1  ldb_qidv:LQID6=1  ldb_qidv:LQID7=1 

  vas VAS1:* dir_qidv:DQID8=1  dir_qidv:DQID9=1  dir_qidv:DQID10=1 dir_qidv:DQID11=1 dir_qidv:DQID12=1 dir_qidv:DQID13=1 dir_qidv:DQID14=1 dir_qidv:DQID15=1 credit_cnt=4096
  vas VAS1   ldb_qidv:LQID8=1  ldb_qidv:LQID9=1  ldb_qidv:LQID10=1 ldb_qidv:LQID11=1 ldb_qidv:LQID12=1 ldb_qidv:LQID13=1 ldb_qidv:LQID14=1 ldb_qidv:LQID15=1

  dir pp DQID0   vas=VAS0 
  dir pp DQID1   vas=VAS0 
  dir pp DQID2   vas=VAS0 
  dir pp DQID3   vas=VAS0 
  dir pp DQID4   vas=VAS0 
  dir pp DQID5   vas=VAS0 
  dir pp DQID6   vas=VAS0 
  dir pp DQID7   vas=VAS0 

  dir pp DQID8   vas=VAS1 
  dir pp DQID9   vas=VAS1
  dir pp DQID10  vas=VAS1
  dir pp DQID11  vas=VAS1
  dir pp DQID12  vas=VAS1
  dir pp DQID13  vas=VAS1
  dir pp DQID14  vas=VAS1
  dir pp DQID15  vas=VAS1

  ldb pp LPP0:*  vas=VAS0 
  ldb pp LPP1:*  vas=VAS0 
  ldb pp LPP2:*  vas=VAS0 
  ldb pp LPP3:*  vas=VAS0 
  ldb pp LPP4:*  vas=VAS0 
  ldb pp LPP5:*  vas=VAS0 
  ldb pp LPP6:*  vas=VAS0 
  ldb pp LPP7:*  vas=VAS0 

  ldb pp LPP8:*  vas=VAS1  
  ldb pp LPP9:*  vas=VAS1 
  ldb pp LPP10:* vas=VAS1 
  ldb pp LPP11:* vas=VAS1 
  ldb pp LPP12:* vas=VAS1 
  ldb pp LPP13:* vas=VAS1 
  ldb pp LPP14:* vas=VAS1 
  ldb pp LPP15:* vas=VAS1 


  ## Threshold config
  msix_cq 1  addr=0x2222cafebebc010 data=0xbb331001 is_ldb=0 cq=DQID0
  msix_cq 2  addr=0x2222cafebebc020 data=0xbb331002 is_ldb=0 cq=DQID1
  msix_cq 3  addr=0x2222cafebebc030 data=0xbb331003 is_ldb=0 cq=DQID2
  msix_cq 4  addr=0x2222cafebebc040 data=0xbb331004 is_ldb=0 cq=DQID3

  dir ims 4   enable=0x1 addr=0xaaaa9999aaaa9000 data=0xaaaa9900
  dir ims 5   enable=0x1 addr=0xaaaa9999aaaa9010 data=0xaaaa9910
  dir ims 6   enable=0x1 addr=0xaaaa9999aaaa9020 data=0xaaaa9920
  dir ims 7   enable=0x1 addr=0xaaaa9999aaaa9030 data=0xaaaa9930


  ## Threshold config --ldb
  msix_cq 9  addr=0x2222cafebebc090 data=0xbb331009 is_ldb=1 cq=LPP0
  msix_cq 10 addr=0x2222cafebebc100 data=0xbb331010 is_ldb=1 cq=LPP1
  msix_cq 11 addr=0x2222cafebebc110 data=0xbb331011 is_ldb=1 cq=LPP2
  msix_cq 12 addr=0x2222cafebebc120 data=0xbb331012 is_ldb=1 cq=LPP3

  ldb ims 4   enable=0x1 addr=0xaaaa7777aaaa0000 data=0xaaaa0000
  ldb ims 5   enable=0x1 addr=0xaaaa7777aaaa1000 data=0xaaaa0010
  ldb ims 6   enable=0x1 addr=0xaaaa7777aaaa2000 data=0xaaaa0020
  ldb ims 7   enable=0x1 addr=0xaaaa7777aaaa3000 data=0xaaaa0030


  ##- PF-CQ Threshold on cq DQID0&3
  dir cq DQID0  cq_depth=32 gpa=sm cq_timer_intr_thresh=2   cq_timer_intr_ena=0 cq_depth_intr_thresh=16 cq_depth_intr_ena=1 cq_isr_en_code=2
  dir cq DQID1  cq_depth=16 gpa=sm cq_timer_intr_thresh=255 cq_timer_intr_ena=1 cq_depth_intr_thresh=14 cq_depth_intr_ena=0 cq_isr_en_code=2
  dir cq DQID2  cq_depth=8 gpa=sm cq_timer_intr_thresh=4   cq_timer_intr_ena=0 cq_depth_intr_thresh=6  cq_depth_intr_ena=1 cq_isr_en_code=2
  dir cq DQID3  cq_depth=16 gpa=sm cq_timer_intr_thresh=511 cq_timer_intr_ena=1 cq_depth_intr_thresh=14 cq_depth_intr_ena=0 cq_isr_en_code=2

  ##- VF-CQ Threshold-cq[0,2] timer on cq 1,3, en_code=1
  dir cq DQID4  cq_depth=16 gpa=sm cq_timer_intr_thresh=2   cq_timer_intr_ena=0 cq_depth_intr_thresh=14 cq_depth_intr_ena=1 cq_isr_en_code=1  
  dir cq DQID5  cq_depth=16 gpa=sm cq_timer_intr_thresh=511 cq_timer_intr_ena=1 cq_depth_intr_thresh=14 cq_depth_intr_ena=0 cq_isr_en_code=1 
  dir cq DQID6  cq_depth=32 gpa=sm cq_timer_intr_thresh=2   cq_timer_intr_ena=0 cq_depth_intr_thresh=28 cq_depth_intr_ena=1 cq_isr_en_code=1
  dir cq DQID7  cq_depth=16 gpa=sm cq_timer_intr_thresh=255 cq_timer_intr_ena=1 cq_depth_intr_thresh=14 cq_depth_intr_ena=0 cq_isr_en_code=1

  ##- PF for normal traffic
  dir cq DQID8  cq_depth=16 gpa=sm cq_timer_intr_thresh=2 cq_timer_intr_ena=0 cq_depth_intr_thresh=14 cq_depth_intr_ena=0 cq_isr_en_code=0
  dir cq DQID9  cq_depth=16 gpa=sm cq_timer_intr_thresh=2 cq_timer_intr_ena=0 cq_depth_intr_thresh=14 cq_depth_intr_ena=0 cq_isr_en_code=0
  dir cq DQID10 cq_depth=16 gpa=sm cq_timer_intr_thresh=2 cq_timer_intr_ena=0 cq_depth_intr_thresh=14 cq_depth_intr_ena=0 cq_isr_en_code=0
  dir cq DQID11 cq_depth=16 gpa=sm cq_timer_intr_thresh=2 cq_timer_intr_ena=0 cq_depth_intr_thresh=14 cq_depth_intr_ena=0 cq_isr_en_code=0

  ##VF for normal traffi
  dir cq DQID12 cq_depth=16 gpa=sm cq_timer_intr_thresh=2 cq_timer_intr_ena=0 cq_depth_intr_thresh=14 cq_depth_intr_ena=0 cq_isr_en_code=0
  dir cq DQID13 cq_depth=16 gpa=sm cq_timer_intr_thresh=2 cq_timer_intr_ena=0 cq_depth_intr_thresh=14 cq_depth_intr_ena=0 cq_isr_en_code=0
  dir cq DQID14 cq_depth=16 gpa=sm cq_timer_intr_thresh=2 cq_timer_intr_ena=0 cq_depth_intr_thresh=14 cq_depth_intr_ena=0 cq_isr_en_code=0
  dir cq DQID15 cq_depth=16 gpa=sm cq_timer_intr_thresh=2 cq_timer_intr_ena=0 cq_depth_intr_thresh=14 cq_depth_intr_ena=0 cq_isr_en_code=0

  ##PF+timer+threshold on cq [0,3]
  ldb cq LPP0   cq_depth=32 gpa=sm qidv0=1 qidix0=LQID0  cq_timer_intr_thresh=2   cq_timer_intr_ena=0 cq_depth_intr_thresh=24 cq_depth_intr_ena=1 cq_isr_en_code=2
  ldb cq LPP1   cq_depth=32 gpa=sm qidv0=1 qidix0=LQID1  cq_timer_intr_thresh=255 cq_timer_intr_ena=1 cq_depth_intr_thresh=2  cq_depth_intr_ena=0 cq_isr_en_code=2
  ldb cq LPP2   cq_depth=4 gpa=sm qidv0=1 qidix0=LQID2  cq_timer_intr_thresh=511 cq_timer_intr_ena=1 cq_depth_intr_thresh=2  cq_depth_intr_ena=0 cq_isr_en_code=2
  ldb cq LPP3   cq_depth=4 gpa=sm qidv0=1 qidix0=LQID3  cq_timer_intr_thresh=2   cq_timer_intr_ena=0 cq_depth_intr_thresh=2  cq_depth_intr_ena=1 cq_isr_en_code=2

  ##VF+timer+threshold on cq[4,5]
  ldb cq LPP4   cq_depth=16 gpa=sm qidv0=1 qidix0=LQID4  cq_timer_intr_thresh=127 cq_timer_intr_ena=1 cq_depth_intr_thresh=14 cq_depth_intr_ena=0 cq_isr_en_code=1
  ldb cq LPP5   cq_depth=32 gpa=sm qidv0=1 qidix0=LQID5  cq_timer_intr_thresh=128 cq_timer_intr_ena=0 cq_depth_intr_thresh=28 cq_depth_intr_ena=1 cq_isr_en_code=1
  ldb cq LPP6   cq_depth=16 gpa=sm qidv0=1 qidix0=LQID6  cq_timer_intr_thresh=255 cq_timer_intr_ena=1 cq_depth_intr_thresh=14 cq_depth_intr_ena=0 cq_isr_en_code=1
  ldb cq LPP7   cq_depth=16 gpa=sm qidv0=1 qidix0=LQID7  cq_timer_intr_thresh=128 cq_timer_intr_ena=0 cq_depth_intr_thresh=14 cq_depth_intr_ena=1 cq_isr_en_code=1

  ## PP/CQ for Normal Traffic-PF
  ldb cq LPP8   cq_depth=16 gpa=sm qidv0=1 qidix0=LQID8  cq_timer_intr_thresh=2 cq_timer_intr_ena=0 cq_depth_intr_thresh=14 cq_depth_intr_ena=0 cq_isr_en_code=0
  ldb cq LPP9   cq_depth=16 gpa=sm qidv0=1 qidix0=LQID9  cq_timer_intr_thresh=2 cq_timer_intr_ena=0 cq_depth_intr_thresh=14 cq_depth_intr_ena=0 cq_isr_en_code=0
  ldb cq LPP10  cq_depth=16 gpa=sm qidv0=1 qidix0=LQID10 cq_timer_intr_thresh=2 cq_timer_intr_ena=0 cq_depth_intr_thresh=14 cq_depth_intr_ena=0 cq_isr_en_code=0
  ldb cq LPP11  cq_depth=16 gpa=sm qidv0=1 qidix0=LQID11 cq_timer_intr_thresh=2 cq_timer_intr_ena=0 cq_depth_intr_thresh=14 cq_depth_intr_ena=0 cq_isr_en_code=0

  ldb cq LPP12  cq_depth=16 gpa=sm qidv0=1 qidix0=LQID12 cq_timer_intr_thresh=2 cq_timer_intr_ena=0 cq_depth_intr_thresh=14 cq_depth_intr_ena=0 cq_isr_en_code=0 
  ldb cq LPP13  cq_depth=16 gpa=sm qidv0=1 qidix0=LQID13 cq_timer_intr_thresh=2 cq_timer_intr_ena=0 cq_depth_intr_thresh=14 cq_depth_intr_ena=0 cq_isr_en_code=0
  ldb cq LPP14  cq_depth=16 gpa=sm qidv0=1 qidix0=LQID14 cq_timer_intr_thresh=2 cq_timer_intr_ena=0 cq_depth_intr_thresh=14 cq_depth_intr_ena=0 cq_isr_en_code=0
  ldb cq LPP15  cq_depth=16 gpa=sm qidv0=1 qidix0=LQID15 cq_timer_intr_thresh=2 cq_timer_intr_ena=0 cq_depth_intr_thresh=14 cq_depth_intr_ena=0 cq_isr_en_code=0

  ##cq4,5,6,7
  vdev VDEV0:* dir_pp:DQID4:_v=1    dir_vqid4_qid=DQID4  #dir_pp4_v=1
  vdev VDEV0   dir_pp:DQID5:_v=1    dir_vqid5_qid=DQID5  #dir_pp5_v=1
  vdev VDEV0   dir_pp:DQID6:_v=1    dir_vqid6_qid=DQID6  #dir_pp6_v=1
  vdev VDEV0   dir_pp:DQID7:_v=1    dir_vqid7_qid=DQID7  #dir_pp7_v=1

  vdev VDEV0   ldb_pp:LPP4:_v=1    ldb_vqid4_qid=LQID4 
  vdev VDEV0   ldb_pp:LPP5:_v=1    ldb_vqid5_qid=LQID5 
  vdev VDEV0   ldb_pp:LPP6:_v=1    ldb_vqid6_qid=LQID6 
  vdev VDEV0   ldb_pp:LPP7:_v=1    ldb_vqid7_qid=LQID7 

#  vf VF0   msi_enable=1 msi_multi_msg_en=5 msi_addr=0x44444400aaaaa040 msi_data=0xc0deff04 
#  vf VF0   msi4_dir_vcq=4  msi5_dir_vcq=5  msi6_dir_vcq=6  msi7_dir_vcq=7 
#  vf VF0   msi15_ldb_vcq=4  msi16_ldb_vcq=5  msi17_ldb_vcq=6 msi18_ldb_vcq=7


cfg_end

##  wr credit_hist_pipe.cfg_dir_cq_intr_armed0 0xffffffff
##  wr credit_hist_pipe.cfg_dir_cq_intr_armed1 0xffffffff
wr credit_hist_pipe.cfg_dir_cq_timer_ctl.enb 1
wr credit_hist_pipe.cfg_dir_cq_timer_ctl.sample_interval 1

##wr credit_hist_pipe.cfg_ldb_cq_intr_armed0 0xffffffff
##wr credit_hist_pipe.cfg_ldb_cq_intr_armed1 0xffffffff
wr credit_hist_pipe.cfg_ldb_cq_timer_ctl.enb 1
wr credit_hist_pipe.cfg_ldb_cq_timer_ctl.sample_interval 1

rd credit_hist_pipe.cfg_dir_cq_intr_armed0 
rd credit_hist_pipe.cfg_dir_cq_intr_armed1 
rd credit_hist_pipe.cfg_ldb_cq_intr_armed0 
rd credit_hist_pipe.cfg_ldb_cq_intr_armed1 

