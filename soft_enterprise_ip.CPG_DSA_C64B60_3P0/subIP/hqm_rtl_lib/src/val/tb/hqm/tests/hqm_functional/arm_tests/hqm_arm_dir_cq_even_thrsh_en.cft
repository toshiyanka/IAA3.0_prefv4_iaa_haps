rd config_master.cfg_pm_pmcsr_disable.disable 0x1
wr config_master.cfg_pm_pmcsr_disable.disable 0x0
rd config_master.cfg_pm_pmcsr_disable.disable 0x0

###################################
# Wait for reset to be done (including hardware memory init)
poll config_master.cfg_diagnostic_reset_status 0x80000bff 0xffffffff 1000

###################################
# Setup 
# cq_threshold =3, [ send 4HCW to check cq_intr generated]
# cq_depth_intr_ena=1[ en_ threshold] cq_isr_en_code=3 [PF]
# cq_isr_vector=1 [ cq0]

#mem_update      # initialize memories to hqm_cfg defaults using backdoor access

cfg_begin

##  msix_cq 2  addr=0x2222cafebebc200 data=0xbb331001 is_ldb=0 cq=1

  dir qid 0 
  dir qid 2 
  dir qid 4 
  dir qid 6 
  dir qid 8 
  dir qid 10
  dir qid 12
  dir qid 14
  dir qid 16
  dir qid 18
  dir qid 20 
  dir qid 22 
  dir qid 24 
  dir qid 26 
  dir qid 28 
  dir qid 30 
  dir qid 32 
  dir qid 34 
  dir qid 36 
  dir qid 38 
  dir qid 40 
  dir qid 42 
  dir qid 44 
  dir qid 46 
  dir qid 48 
  dir qid 50 
  dir qid 52 
  dir qid 54 
  dir qid 56 
  dir qid 58 
  dir qid 60 
  dir qid 62 

  vas VAS0:* credit_cnt=1024 dir_qidv0=1 dir_qidv2=1 dir_qidv4=1 dir_qidv6=1  dir_qidv8=1 dir_qidv10=1 dir_qidv12=1 dir_qidv14=1 dir_qidv16=1  dir_qidv18=1 dir_qidv20=1 dir_qidv22=1 dir_qidv24=1 dir_qidv26=1  dir_qidv28=1 dir_qidv30=1 dir_qidv32=1 dir_qidv34=1 dir_qidv36=1  dir_qidv38=1 dir_qidv40=1 dir_qidv42=1 dir_qidv44=1 dir_qidv46=1  dir_qidv48=1 dir_qidv50=1 dir_qidv52=1 dir_qidv54=1 dir_qidv56=1  dir_qidv58=1 dir_qidv60=1 dir_qidv62=1 

  dir pp 0  vas=VAS0 
  dir pp 2  vas=VAS0 
  dir pp 4  vas=VAS0 
  dir pp 6  vas=VAS0 
  dir pp 8  vas=VAS0 
  dir pp 10  vas=VAS0 
  dir pp 12  vas=VAS0 
  dir pp 14  vas=VAS0 
  dir pp 16  vas=VAS0 
  dir pp 18  vas=VAS0 
  dir pp 20  vas=VAS0 
  dir pp 22  vas=VAS0 
  dir pp 24  vas=VAS0 
  dir pp 26  vas=VAS0 
  dir pp 28  vas=VAS0 
  dir pp 30  vas=VAS0 
  dir pp 32  vas=VAS0 
  dir pp 34  vas=VAS0 
  dir pp 36  vas=VAS0 
  dir pp 38  vas=VAS0 
  dir pp 40  vas=VAS0 
  dir pp 42  vas=VAS0 
  dir pp 44  vas=VAS0 
  dir pp 46  vas=VAS0 
  dir pp 48  vas=VAS0 
  dir pp 50  vas=VAS0 
  dir pp 52  vas=VAS0 
  dir pp 54  vas=VAS0 
  dir pp 56  vas=VAS0 
  dir pp 58  vas=VAS0 
  dir pp 60  vas=VAS0 
  dir pp 62  vas=VAS0 

  dir cq 0   gpa=sm cq_depth=16 cq_timer_intr_thresh=1 cq_timer_intr_ena=0 cq_depth_intr_thresh=3 cq_depth_intr_ena=1 cq_isr_en_code=2  cq_isr_vector=0
  dir cq 2   gpa=sm cq_depth=16 cq_timer_intr_thresh=1 cq_timer_intr_ena=0 cq_depth_intr_thresh=3 cq_depth_intr_ena=1 cq_isr_en_code=2  cq_isr_vector=2
  dir cq 4   gpa=sm cq_depth=16 cq_timer_intr_thresh=1 cq_timer_intr_ena=0 cq_depth_intr_thresh=3 cq_depth_intr_ena=1 cq_isr_en_code=2  cq_isr_vector=4
  dir cq 6   gpa=sm cq_depth=16 cq_timer_intr_thresh=1 cq_timer_intr_ena=0 cq_depth_intr_thresh=3 cq_depth_intr_ena=1 cq_isr_en_code=2  cq_isr_vector=6
  dir cq 8   gpa=sm cq_depth=16 cq_timer_intr_thresh=1 cq_timer_intr_ena=0 cq_depth_intr_thresh=3 cq_depth_intr_ena=1 cq_isr_en_code=2  cq_isr_vector=8
  dir cq 10  gpa=sm cq_depth=16 cq_timer_intr_thresh=1 cq_timer_intr_ena=0 cq_depth_intr_thresh=3 cq_depth_intr_ena=1 cq_isr_en_code=2  cq_isr_vector=10
  dir cq 12  gpa=sm cq_depth=16 cq_timer_intr_thresh=1 cq_timer_intr_ena=0 cq_depth_intr_thresh=3 cq_depth_intr_ena=1 cq_isr_en_code=2  cq_isr_vector=12
  dir cq 14  gpa=sm cq_depth=16 cq_timer_intr_thresh=1 cq_timer_intr_ena=0 cq_depth_intr_thresh=3 cq_depth_intr_ena=1 cq_isr_en_code=2  cq_isr_vector=14
  dir cq 16  gpa=sm cq_depth=16 cq_timer_intr_thresh=1 cq_timer_intr_ena=0 cq_depth_intr_thresh=3 cq_depth_intr_ena=1 cq_isr_en_code=2  cq_isr_vector=16
  dir cq 18  gpa=sm cq_depth=16 cq_timer_intr_thresh=1 cq_timer_intr_ena=0 cq_depth_intr_thresh=3 cq_depth_intr_ena=1 cq_isr_en_code=2  cq_isr_vector=18
  dir cq 20  gpa=sm cq_depth=16 cq_timer_intr_thresh=1 cq_timer_intr_ena=0 cq_depth_intr_thresh=3 cq_depth_intr_ena=1 cq_isr_en_code=2  cq_isr_vector=20
  dir cq 22  gpa=sm cq_depth=16 cq_timer_intr_thresh=1 cq_timer_intr_ena=0 cq_depth_intr_thresh=3 cq_depth_intr_ena=1 cq_isr_en_code=2  cq_isr_vector=22
  dir cq 24  gpa=sm cq_depth=16 cq_timer_intr_thresh=1 cq_timer_intr_ena=0 cq_depth_intr_thresh=3 cq_depth_intr_ena=1 cq_isr_en_code=2  cq_isr_vector=24
  dir cq 26  gpa=sm cq_depth=16 cq_timer_intr_thresh=1 cq_timer_intr_ena=0 cq_depth_intr_thresh=3 cq_depth_intr_ena=1 cq_isr_en_code=2  cq_isr_vector=26
  dir cq 28  gpa=sm cq_depth=16 cq_timer_intr_thresh=1 cq_timer_intr_ena=0 cq_depth_intr_thresh=3 cq_depth_intr_ena=1 cq_isr_en_code=2  cq_isr_vector=28
  dir cq 30  gpa=sm cq_depth=16 cq_timer_intr_thresh=1 cq_timer_intr_ena=0 cq_depth_intr_thresh=3 cq_depth_intr_ena=1 cq_isr_en_code=2  cq_isr_vector=30
  dir cq 32  gpa=sm cq_depth=16 cq_timer_intr_thresh=1 cq_timer_intr_ena=0 cq_depth_intr_thresh=3 cq_depth_intr_ena=1 cq_isr_en_code=2  cq_isr_vector=32
  dir cq 34  gpa=sm cq_depth=16 cq_timer_intr_thresh=1 cq_timer_intr_ena=0 cq_depth_intr_thresh=3 cq_depth_intr_ena=1 cq_isr_en_code=2  cq_isr_vector=34
  dir cq 36  gpa=sm cq_depth=16 cq_timer_intr_thresh=1 cq_timer_intr_ena=0 cq_depth_intr_thresh=3 cq_depth_intr_ena=1 cq_isr_en_code=2  cq_isr_vector=36
  dir cq 38  gpa=sm cq_depth=16 cq_timer_intr_thresh=1 cq_timer_intr_ena=0 cq_depth_intr_thresh=3 cq_depth_intr_ena=1 cq_isr_en_code=2  cq_isr_vector=38
  dir cq 40  gpa=sm cq_depth=16 cq_timer_intr_thresh=1 cq_timer_intr_ena=0 cq_depth_intr_thresh=3 cq_depth_intr_ena=1 cq_isr_en_code=2  cq_isr_vector=40
  dir cq 42  gpa=sm cq_depth=16 cq_timer_intr_thresh=1 cq_timer_intr_ena=0 cq_depth_intr_thresh=3 cq_depth_intr_ena=1 cq_isr_en_code=2  cq_isr_vector=42
  dir cq 44  gpa=sm cq_depth=16 cq_timer_intr_thresh=1 cq_timer_intr_ena=0 cq_depth_intr_thresh=3 cq_depth_intr_ena=1 cq_isr_en_code=2  cq_isr_vector=44
  dir cq 46  gpa=sm cq_depth=16 cq_timer_intr_thresh=1 cq_timer_intr_ena=0 cq_depth_intr_thresh=3 cq_depth_intr_ena=1 cq_isr_en_code=2  cq_isr_vector=46
  dir cq 48  gpa=sm cq_depth=16 cq_timer_intr_thresh=1 cq_timer_intr_ena=0 cq_depth_intr_thresh=3 cq_depth_intr_ena=1 cq_isr_en_code=2  cq_isr_vector=48
  dir cq 50  gpa=sm cq_depth=16 cq_timer_intr_thresh=1 cq_timer_intr_ena=0 cq_depth_intr_thresh=3 cq_depth_intr_ena=1 cq_isr_en_code=2  cq_isr_vector=50
  dir cq 52  gpa=sm cq_depth=16 cq_timer_intr_thresh=1 cq_timer_intr_ena=0 cq_depth_intr_thresh=3 cq_depth_intr_ena=1 cq_isr_en_code=2  cq_isr_vector=52
  dir cq 54  gpa=sm cq_depth=16 cq_timer_intr_thresh=1 cq_timer_intr_ena=0 cq_depth_intr_thresh=3 cq_depth_intr_ena=1 cq_isr_en_code=2  cq_isr_vector=54
  dir cq 56  gpa=sm cq_depth=16 cq_timer_intr_thresh=1 cq_timer_intr_ena=0 cq_depth_intr_thresh=3 cq_depth_intr_ena=1 cq_isr_en_code=2  cq_isr_vector=56
  dir cq 58  gpa=sm cq_depth=16 cq_timer_intr_thresh=1 cq_timer_intr_ena=0 cq_depth_intr_thresh=3 cq_depth_intr_ena=1 cq_isr_en_code=2  cq_isr_vector=58
  dir cq 60  gpa=sm cq_depth=16 cq_timer_intr_thresh=1 cq_timer_intr_ena=0 cq_depth_intr_thresh=3 cq_depth_intr_ena=1 cq_isr_en_code=2  cq_isr_vector=60
  dir cq 62  gpa=sm cq_depth=16 cq_timer_intr_thresh=1 cq_timer_intr_ena=0 cq_depth_intr_thresh=3 cq_depth_intr_ena=1 cq_isr_en_code=2  cq_isr_vector=62
  
  
cfg_end

##
rd hqm_system_csr.ingress_alarm_enable 0x00000000
wr hqm_system_csr.ingress_alarm_enable 0xffffffff
rd hqm_system_csr.ingress_alarm_enable 0x0000003f


##configuration even 
rd credit_hist_pipe.cfg_dir_cq_intr_armed0 0x0
wr credit_hist_pipe.cfg_dir_cq_intr_armed0 0xffffffff
rd credit_hist_pipe.cfg_dir_cq_intr_armed0 0xffffffff
rd credit_hist_pipe.cfg_dir_cq_intr_armed1 0x0
wr credit_hist_pipe.cfg_dir_cq_intr_armed1 0xffffffff
rd credit_hist_pipe.cfg_dir_cq_intr_armed1 0xffffffff

## Interrupt timer enable bit. &SAMPLE_INTERVAL required for timer intr case
wr credit_hist_pipe.cfg_dir_cq_timer_ctl.enb 1
wr credit_hist_pipe.cfg_dir_cq_timer_ctl.sample_interval 1
rd credit_hist_pipe.cfg_dir_cq_timer_ctl.enb 1
rd credit_hist_pipe.cfg_dir_cq_timer_ctl.sample_interval 1
