idle 400
###################################
# Read first part of PF header
rd hqm_pf_cfg_i.vendor_id
rd hqm_pf_cfg_i.device_id
rd hqm_pf_cfg_i.device_command
rd hqm_pf_cfg_i.device_status
###################################
# Setup FUNC_PF BAR to a base address of 0x00000001_xxxxxxxx
wr hqm_pf_cfg_i.func_bar_l 0x00000000
wr hqm_pf_cfg_i.func_bar_u 0x00000001
###################################
# Setup CSR_PF BAR to a base address of 0x00000002_xxxxxxxx
wr hqm_pf_cfg_i.csr_bar_l 0x00000000
wr hqm_pf_cfg_i.csr_bar_u 0x00000002
###################################
# Enable memory operations
wr hqm_pf_cfg_i.device_command 0x6
rd hqm_pf_cfg_i.device_command

###################################
# Wait for reset to be done (including hardware memory init)
poll config_master.cfg_diagnostic_reset_status 0x000001ff 0x000081ff 1000

###################################
# Setup LUTs used by HCWs

#mem_update      # initialize memories to hqm_cfg defaults using backdoor access

cfg_begin

  ldb qid  0 fid_cfg_v=1
  ldb qid  1 fid_cfg_v=1
  ldb qid  2 fid_cfg_v=1
  ldb qid  3 fid_cfg_v=1
  ldb qid  4 fid_cfg_v=1
  ldb qid  5 fid_cfg_v=1
  ldb qid  6 fid_cfg_v=1
  ldb qid  7 fid_cfg_v=1
  ldb qid  8 fid_cfg_v=1
  ldb qid  9 fid_cfg_v=1
  ldb qid 10 fid_cfg_v=1
  ldb qid 11 fid_cfg_v=1
  ldb qid 12 fid_cfg_v=1
  ldb qid 13 fid_cfg_v=1
  ldb qid 14 fid_cfg_v=1
  ldb qid 15 fid_cfg_v=1
  ldb qid 16 fid_cfg_v=1
  ldb qid 17 fid_cfg_v=1
  ldb qid 18 fid_cfg_v=1
  ldb qid 19 fid_cfg_v=1
  ldb qid 20 fid_cfg_v=1
  ldb qid 21 fid_cfg_v=1
  ldb qid 22 fid_cfg_v=1
  ldb qid 23 fid_cfg_v=1
  ldb qid 24 fid_cfg_v=1
  ldb qid 25 fid_cfg_v=1
  ldb qid 26 fid_cfg_v=1
  ldb qid 27 fid_cfg_v=1
  ldb qid 28 fid_cfg_v=1
  ldb qid 29 fid_cfg_v=1
  ldb qid 30 fid_cfg_v=1
  ldb qid 31 fid_cfg_v=1

  dir pool 0 credit_cnt=0xfc0 credit_limit=0x1000 freelist_base=0 freelist_limit=0xfff
  ldb pool 0 credit_cnt=0x3f80 credit_limit=0x4000 freelist_base=0 freelist_limit=0x3fff

  vas 0 ldb_qidv0=1  ldb_qidv1=1  ldb_qidv2=1  ldb_qidv3=1  ldb_qidv4=1  ldb_qidv5=1  ldb_qidv6=1  ldb_qidv7=1  ldb_qidv8=1  ldb_qidv9=1
  vas 0 ldb_qidv10=1 ldb_qidv11=1 ldb_qidv12=1 ldb_qidv13=1 ldb_qidv14=1 ldb_qidv15=1 ldb_qidv16=1 ldb_qidv17=1 ldb_qidv18=1 ldb_qidv19=1
  vas 0 ldb_qidv20=1 ldb_qidv21=1 ldb_qidv22=1 ldb_qidv23=1 ldb_qidv24=1 ldb_qidv25=1 ldb_qidv26=1 ldb_qidv27=1 ldb_qidv28=1 ldb_qidv29=1
  vas 0 ldb_qidv30=1 ldb_qidv31=1

  ldb pp 0  gpa=sm vas=0 dir_pool=0 ldb_pool=0 dir_credit_count=0x2 ldb_credit_count=0x4 dir_min_credit_quanta=0x10 ldb_min_credit_quanta=0x10 ldb_credit_hwm=0x80 ldb_credit_lwm=0x40
  ldb cq 0  gpa=sm qidv0=1 qidix0=0  qidv1=1 qidix1=1  qidv2=1 qidix2=2  qidv3=1 qidix3=3  qidv4=1 qidix4=4  qidv5=1 qidix5=5  qidv6=1 qidix6=6  qidv7=1 qidix7=7

  ldb pp 1  gpa=sm vas=0 dir_pool=0 ldb_pool=0 dir_credit_count=0x2 ldb_credit_count=0x4 dir_min_credit_quanta=0x10 ldb_min_credit_quanta=0x10 ldb_credit_hwm=0x80 ldb_credit_lwm=0x40
  ldb cq 1  gpa=sm qidv0=1 qidix0=8  qidv1=1 qidix1=1  qidv2=1 qidix2=2  qidv3=1 qidix3=3  qidv4=1 qidix4=4  qidv5=1 qidix5=5  qidv6=1 qidix6=6  qidv7=1 qidix7=7

  ldb pp 2  gpa=sm vas=0 dir_pool=0 ldb_pool=0 dir_credit_count=0x2 ldb_credit_count=0x4 dir_min_credit_quanta=0x10 ldb_min_credit_quanta=0x10 ldb_credit_hwm=0x80 ldb_credit_lwm=0x40
  ldb cq 2  gpa=sm qidv0=1 qidix0=8  qidv1=1 qidix1=9  qidv2=1 qidix2=2  qidv3=1 qidix3=3  qidv4=1 qidix4=4  qidv5=1 qidix5=5  qidv6=1 qidix6=6  qidv7=1 qidix7=7

  ldb pp 3  gpa=sm vas=0 dir_pool=0 ldb_pool=0 dir_credit_count=0x2 ldb_credit_count=0x4 dir_min_credit_quanta=0x10 ldb_min_credit_quanta=0x10 ldb_credit_hwm=0x80 ldb_credit_lwm=0x40
  ldb cq 3  gpa=sm qidv0=1 qidix0=8  qidv1=1 qidix1=9  qidv2=1 qidix2=10 qidv3=1 qidix3=3  qidv4=1 qidix4=4  qidv5=1 qidix5=5  qidv6=1 qidix6=6  qidv7=1 qidix7=7

  ldb pp 4  gpa=sm vas=0 dir_pool=0 ldb_pool=0 dir_credit_count=0x2 ldb_credit_count=0x4 dir_min_credit_quanta=0x10 ldb_min_credit_quanta=0x10 ldb_credit_hwm=0x80 ldb_credit_lwm=0x40
  ldb cq 4  gpa=sm qidv0=1 qidix0=8  qidv1=1 qidix1=9  qidv2=1 qidix2=10 qidv3=1 qidix3=11 qidv4=1 qidix4=4  qidv5=1 qidix5=5  qidv6=1 qidix6=6  qidv7=1 qidix7=7

  ldb pp 5  gpa=sm vas=0 dir_pool=0 ldb_pool=0 dir_credit_count=0x2 ldb_credit_count=0x4 dir_min_credit_quanta=0x10 ldb_min_credit_quanta=0x10 ldb_credit_hwm=0x80 ldb_credit_lwm=0x40
  ldb cq 5  gpa=sm qidv0=1 qidix0=8  qidv1=1 qidix1=9  qidv2=1 qidix2=10 qidv3=1 qidix3=11 qidv4=1 qidix4=12 qidv5=1 qidix5=5  qidv6=1 qidix6=6  qidv7=1 qidix7=7

  ldb pp 6  gpa=sm vas=0 dir_pool=0 ldb_pool=0 dir_credit_count=0x2 ldb_credit_count=0x4 dir_min_credit_quanta=0x10 ldb_min_credit_quanta=0x10 ldb_credit_hwm=0x80 ldb_credit_lwm=0x40
  ldb cq 6  gpa=sm qidv0=1 qidix0=8  qidv1=1 qidix1=9  qidv2=1 qidix2=10 qidv3=1 qidix3=11 qidv4=1 qidix4=12 qidv5=1 qidix5=13 qidv6=1 qidix6=6  qidv7=1 qidix7=7

  ldb pp 7  gpa=sm vas=0 dir_pool=0 ldb_pool=0 dir_credit_count=0x2 ldb_credit_count=0x4 dir_min_credit_quanta=0x10 ldb_min_credit_quanta=0x10 ldb_credit_hwm=0x80 ldb_credit_lwm=0x40
  ldb cq 7  gpa=sm qidv0=1 qidix0=8  qidv1=1 qidix1=9  qidv2=1 qidix2=10 qidv3=1 qidix3=11 qidv4=1 qidix4=12 qidv5=1 qidix5=13 qidv6=1 qidix6=14 qidv7=1 qidix7=7

  ldb pp 8  gpa=sm vas=0 dir_pool=0 ldb_pool=0 dir_credit_count=0x2 ldb_credit_count=0x4 dir_min_credit_quanta=0x10 ldb_min_credit_quanta=0x10 ldb_credit_hwm=0x80 ldb_credit_lwm=0x40
  ldb cq 8  gpa=sm qidv0=1 qidix0=8  qidv1=1 qidix1=9  qidv2=1 qidix2=10 qidv3=1 qidix3=11 qidv4=1 qidix4=12 qidv5=1 qidix5=13 qidv6=1 qidix6=14 qidv7=1 qidix7=15

  ldb pp 9  gpa=sm vas=0 dir_pool=0 ldb_pool=0 dir_credit_count=0x2 ldb_credit_count=0x4 dir_min_credit_quanta=0x10 ldb_min_credit_quanta=0x10 ldb_credit_hwm=0x80 ldb_credit_lwm=0x40
  ldb cq 9  gpa=sm qidv0=1 qidix0=16 qidv1=1 qidix1=9  qidv2=1 qidix2=10 qidv3=1 qidix3=11 qidv4=1 qidix4=12 qidv5=1 qidix5=13 qidv6=1 qidix6=14 qidv7=1 qidix7=15

  ldb pp 10 gpa=sm vas=0 dir_pool=0 ldb_pool=0 dir_credit_count=0x2 ldb_credit_count=0x4 dir_min_credit_quanta=0x10 ldb_min_credit_quanta=0x10 ldb_credit_hwm=0x80 ldb_credit_lwm=0x40
  ldb cq 10 gpa=sm qidv0=1 qidix0=16 qidv1=1 qidix1=17 qidv2=1 qidix2=10 qidv3=1 qidix3=11 qidv4=1 qidix4=12 qidv5=1 qidix5=13 qidv6=1 qidix6=14 qidv7=1 qidix7=15

  ldb pp 11 gpa=sm vas=0 dir_pool=0 ldb_pool=0 dir_credit_count=0x2 ldb_credit_count=0x4 dir_min_credit_quanta=0x10 ldb_min_credit_quanta=0x10 ldb_credit_hwm=0x80 ldb_credit_lwm=0x40
  ldb cq 11 gpa=sm qidv0=1 qidix0=16 qidv1=1 qidix1=17 qidv2=1 qidix2=18 qidv3=1 qidix3=11 qidv4=1 qidix4=12 qidv5=1 qidix5=13 qidv6=1 qidix6=14 qidv7=1 qidix7=15

  ldb pp 12 gpa=sm vas=0 dir_pool=0 ldb_pool=0 dir_credit_count=0x2 ldb_credit_count=0x4 dir_min_credit_quanta=0x10 ldb_min_credit_quanta=0x10 ldb_credit_hwm=0x80 ldb_credit_lwm=0x40
  ldb cq 12 gpa=sm qidv0=1 qidix0=16 qidv1=1 qidix1=17 qidv2=1 qidix2=18 qidv3=1 qidix3=19 qidv4=1 qidix4=12 qidv5=1 qidix5=13 qidv6=1 qidix6=14 qidv7=1 qidix7=15

  ldb pp 13 gpa=sm vas=0 dir_pool=0 ldb_pool=0 dir_credit_count=0x2 ldb_credit_count=0x4 dir_min_credit_quanta=0x10 ldb_min_credit_quanta=0x10 ldb_credit_hwm=0x80 ldb_credit_lwm=0x40
  ldb cq 13 gpa=sm qidv0=1 qidix0=16 qidv1=1 qidix1=17 qidv2=1 qidix2=18 qidv3=1 qidix3=19 qidv4=1 qidix4=20 qidv5=1 qidix5=13 qidv6=1 qidix6=14 qidv7=1 qidix7=15

  ldb pp 14 gpa=sm vas=0 dir_pool=0 ldb_pool=0 dir_credit_count=0x2 ldb_credit_count=0x4 dir_min_credit_quanta=0x10 ldb_min_credit_quanta=0x10 ldb_credit_hwm=0x80 ldb_credit_lwm=0x40
  ldb cq 14 gpa=sm qidv0=1 qidix0=16 qidv1=1 qidix1=17 qidv2=1 qidix2=18 qidv3=1 qidix3=19 qidv4=1 qidix4=20 qidv5=1 qidix5=21 qidv6=1 qidix6=14 qidv7=1 qidix7=15

  ldb pp 15 gpa=sm vas=0 dir_pool=0 ldb_pool=0 dir_credit_count=0x2 ldb_credit_count=0x4 dir_min_credit_quanta=0x10 ldb_min_credit_quanta=0x10 ldb_credit_hwm=0x80 ldb_credit_lwm=0x40
  ldb cq 15 gpa=sm qidv0=1 qidix0=16 qidv1=1 qidix1=17 qidv2=1 qidix2=18 qidv3=1 qidix3=19 qidv4=1 qidix4=20 qidv5=1 qidix5=21 qidv6=1 qidix6=22 qidv7=1 qidix7=15

  ldb pp 16 gpa=sm vas=0 dir_pool=0 ldb_pool=0 dir_credit_count=0x2 ldb_credit_count=0x4 dir_min_credit_quanta=0x10 ldb_min_credit_quanta=0x10 ldb_credit_hwm=0x80 ldb_credit_lwm=0x40
  ldb cq 16 gpa=sm qidv0=1 qidix0=16 qidv1=1 qidix1=17 qidv2=1 qidix2=18 qidv3=1 qidix3=19 qidv4=1 qidix4=20 qidv5=1 qidix5=21 qidv6=1 qidix6=22 qidv7=1 qidix7=23

  ldb pp 17 gpa=sm vas=0 dir_pool=0 ldb_pool=0 dir_credit_count=0x2 ldb_credit_count=0x4 dir_min_credit_quanta=0x10 ldb_min_credit_quanta=0x10 ldb_credit_hwm=0x80 ldb_credit_lwm=0x40
  ldb cq 17 gpa=sm qidv0=1 qidix0=24 qidv1=1 qidix1=17 qidv2=1 qidix2=18 qidv3=1 qidix3=19 qidv4=1 qidix4=20 qidv5=1 qidix5=21 qidv6=1 qidix6=22 qidv7=1 qidix7=23

  ldb pp 18 gpa=sm vas=0 dir_pool=0 ldb_pool=0 dir_credit_count=0x2 ldb_credit_count=0x4 dir_min_credit_quanta=0x10 ldb_min_credit_quanta=0x10 ldb_credit_hwm=0x80 ldb_credit_lwm=0x40
  ldb cq 18 gpa=sm qidv0=1 qidix0=24 qidv1=1 qidix1=25 qidv2=1 qidix2=18 qidv3=1 qidix3=19 qidv4=1 qidix4=20 qidv5=1 qidix5=21 qidv6=1 qidix6=22 qidv7=1 qidix7=23

  ldb pp 19 gpa=sm vas=0 dir_pool=0 ldb_pool=0 dir_credit_count=0x2 ldb_credit_count=0x4 dir_min_credit_quanta=0x10 ldb_min_credit_quanta=0x10 ldb_credit_hwm=0x80 ldb_credit_lwm=0x40
  ldb cq 19 gpa=sm qidv0=1 qidix0=24 qidv1=1 qidix1=25 qidv2=1 qidix2=26 qidv3=1 qidix3=19 qidv4=1 qidix4=20 qidv5=1 qidix5=21 qidv6=1 qidix6=22 qidv7=1 qidix7=23

  ldb pp 20 gpa=sm vas=0 dir_pool=0 ldb_pool=0 dir_credit_count=0x2 ldb_credit_count=0x4 dir_min_credit_quanta=0x10 ldb_min_credit_quanta=0x10 ldb_credit_hwm=0x80 ldb_credit_lwm=0x40
  ldb cq 20 gpa=sm qidv0=1 qidix0=24 qidv1=1 qidix1=25 qidv2=1 qidix2=26 qidv3=1 qidix3=27 qidv4=1 qidix4=20 qidv5=1 qidix5=21 qidv6=1 qidix6=22 qidv7=1 qidix7=23

  ldb pp 21 gpa=sm vas=0 dir_pool=0 ldb_pool=0 dir_credit_count=0x2 ldb_credit_count=0x4 dir_min_credit_quanta=0x10 ldb_min_credit_quanta=0x10 ldb_credit_hwm=0x80 ldb_credit_lwm=0x40
  ldb cq 21 gpa=sm qidv0=1 qidix0=24 qidv1=1 qidix1=25 qidv2=1 qidix2=26 qidv3=1 qidix3=27 qidv4=1 qidix4=28 qidv5=1 qidix5=21 qidv6=1 qidix6=22 qidv7=1 qidix7=23

  ldb pp 22 gpa=sm vas=0 dir_pool=0 ldb_pool=0 dir_credit_count=0x2 ldb_credit_count=0x4 dir_min_credit_quanta=0x10 ldb_min_credit_quanta=0x10 ldb_credit_hwm=0x80 ldb_credit_lwm=0x40
  ldb cq 22 gpa=sm qidv0=1 qidix0=24 qidv1=1 qidix1=25 qidv2=1 qidix2=26 qidv3=1 qidix3=27 qidv4=1 qidix4=28 qidv5=1 qidix5=29 qidv6=1 qidix6=22 qidv7=1 qidix7=23

  ldb pp 23 gpa=sm vas=0 dir_pool=0 ldb_pool=0 dir_credit_count=0x2 ldb_credit_count=0x4 dir_min_credit_quanta=0x10 ldb_min_credit_quanta=0x10 ldb_credit_hwm=0x80 ldb_credit_lwm=0x40
  ldb cq 23 gpa=sm qidv0=1 qidix0=24 qidv1=1 qidix1=25 qidv2=1 qidix2=26 qidv3=1 qidix3=27 qidv4=1 qidix4=28 qidv5=1 qidix5=29 qidv6=1 qidix6=30 qidv7=1 qidix7=23

  ldb pp 24 gpa=sm vas=0 dir_pool=0 ldb_pool=0 dir_credit_count=0x2 ldb_credit_count=0x4 dir_min_credit_quanta=0x10 ldb_min_credit_quanta=0x10 ldb_credit_hwm=0x80 ldb_credit_lwm=0x40
  ldb cq 24 gpa=sm qidv0=1 qidix0=24 qidv1=1 qidix1=25 qidv2=1 qidix2=26 qidv3=1 qidix3=27 qidv4=1 qidix4=28 qidv5=1 qidix5=29 qidv6=1 qidix6=30 qidv7=1 qidix7=31

  ldb pp 25 gpa=sm vas=0 dir_pool=0 ldb_pool=0 dir_credit_count=0x2 ldb_credit_count=0x4 dir_min_credit_quanta=0x10 ldb_min_credit_quanta=0x10 ldb_credit_hwm=0x80 ldb_credit_lwm=0x40
  ldb cq 25 gpa=sm qidv0=1 qidix0=0  qidv1=1 qidix1=25 qidv2=1 qidix2=26 qidv3=1 qidix3=27 qidv4=1 qidix4=28 qidv5=1 qidix5=29 qidv6=1 qidix6=30 qidv7=1 qidix7=31

  ldb pp 26 gpa=sm vas=0 dir_pool=0 ldb_pool=0 dir_credit_count=0x2 ldb_credit_count=0x4 dir_min_credit_quanta=0x10 ldb_min_credit_quanta=0x10 ldb_credit_hwm=0x80 ldb_credit_lwm=0x40
  ldb cq 26 gpa=sm qidv0=1 qidix0=0  qidv1=1 qidix1=1  qidv2=1 qidix2=26 qidv3=1 qidix3=27 qidv4=1 qidix4=28 qidv5=1 qidix5=29 qidv6=1 qidix6=30 qidv7=1 qidix7=31

  ldb pp 27 gpa=sm vas=0 dir_pool=0 ldb_pool=0 dir_credit_count=0x2 ldb_credit_count=0x4 dir_min_credit_quanta=0x10 ldb_min_credit_quanta=0x10 ldb_credit_hwm=0x80 ldb_credit_lwm=0x40
  ldb cq 27 gpa=sm qidv0=1 qidix0=0  qidv1=1 qidix1=1  qidv2=1 qidix2=2  qidv3=1 qidix3=27 qidv4=1 qidix4=28 qidv5=1 qidix5=29 qidv6=1 qidix6=30 qidv7=1 qidix7=31

  ldb pp 28 gpa=sm vas=0 dir_pool=0 ldb_pool=0 dir_credit_count=0x2 ldb_credit_count=0x4 dir_min_credit_quanta=0x10 ldb_min_credit_quanta=0x10 ldb_credit_hwm=0x80 ldb_credit_lwm=0x40
  ldb cq 28 gpa=sm qidv0=1 qidix0=0  qidv1=1 qidix1=1  qidv2=1 qidix2=2  qidv3=1 qidix3=3  qidv4=1 qidix4=28 qidv5=1 qidix5=29 qidv6=1 qidix6=30 qidv7=1 qidix7=31

  ldb pp 29 gpa=sm vas=0 dir_pool=0 ldb_pool=0 dir_credit_count=0x2 ldb_credit_count=0x4 dir_min_credit_quanta=0x10 ldb_min_credit_quanta=0x10 ldb_credit_hwm=0x80 ldb_credit_lwm=0x40
  ldb cq 29 gpa=sm qidv0=1 qidix0=0  qidv1=1 qidix1=1  qidv2=1 qidix2=2  qidv3=1 qidix3=3  qidv4=1 qidix4=4  qidv5=1 qidix5=29 qidv6=1 qidix6=30 qidv7=1 qidix7=31

  ldb pp 30 gpa=sm vas=0 dir_pool=0 ldb_pool=0 dir_credit_count=0x2 ldb_credit_count=0x4 dir_min_credit_quanta=0x10 ldb_min_credit_quanta=0x10 ldb_credit_hwm=0x80 ldb_credit_lwm=0x40
  ldb cq 30 gpa=sm qidv0=1 qidix0=0  qidv1=1 qidix1=1  qidv2=1 qidix2=2  qidv3=1 qidix3=3  qidv4=1 qidix4=4  qidv5=1 qidix5=5  qidv6=1 qidix6=30 qidv7=1 qidix7=31

  ldb pp 31 gpa=sm vas=0 dir_pool=0 ldb_pool=0 dir_credit_count=0x2 ldb_credit_count=0x4 dir_min_credit_quanta=0x10 ldb_min_credit_quanta=0x10 ldb_credit_hwm=0x80 ldb_credit_lwm=0x40
  ldb cq 31 gpa=sm qidv0=1 qidix0=0  qidv1=1 qidix1=1  qidv2=1 qidix2=2  qidv3=1 qidix3=3  qidv4=1 qidix4=4  qidv5=1 qidix5=5  qidv6=1 qidix6=6  qidv7=1 qidix7=31

cfg_end

rd hqm_pf_cfg_i.vendor_id
