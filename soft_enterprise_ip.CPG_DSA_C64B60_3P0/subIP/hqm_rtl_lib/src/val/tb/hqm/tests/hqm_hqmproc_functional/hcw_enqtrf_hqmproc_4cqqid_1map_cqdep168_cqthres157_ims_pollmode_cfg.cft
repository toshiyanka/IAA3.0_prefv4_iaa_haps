idle 400
###################################
# Read first part of PF header
rd hqm_pf_cfg_i.vendor_id
rd hqm_pf_cfg_i.device_id
rd hqm_pf_cfg_i.device_command
rd hqm_pf_cfg_i.device_status
###################################
# Setup CSR_PF BAR to a base address of 0x00000002_xxxxxxxx
wr hqm_pf_cfg_i.csr_bar_l 0x00000000
wr hqm_pf_cfg_i.csr_bar_u 0x00000002
###################################
# Setup FUNC_PF BAR to a base address of 0x00000001_xxxxxxxx
wr hqm_pf_cfg_i.func_bar_l 0x00000000
wr hqm_pf_cfg_i.func_bar_u 0x00000001
###################################
# Setup FUNC_VF BAR to a base address of 0x00000003_xxxxxxxx
#### wr hqm_pf_cfg_i.sriov_cap_func_bar_l 0x00000000
#### wr hqm_pf_cfg_i.sriov_cap_func_bar_u 0x00000003
###################################
# Enable PF memory operations
wr hqm_pf_cfg_i.device_command 0x6
rd hqm_pf_cfg_i.device_command
###################################
wr config_master.cfg_pm_pmcsr_disable.disable 0x0
rd config_master.cfg_pm_pmcsr_disable.disable 0x0
##
###poll to Wait for reset to be done
poll config_master.cfg_diagnostic_reset_status 0x800003ff 0x800003ff 500
###poll to Wait for unit_idle to be done
poll config_master.cfg_diagnostic_idle_status 0x0007ffff 0x0007ffff 500
###################################



###################################
# Setup LUTs used by HCWs

#mem_update      # initialize memories to hqm_cfg defaults using backdoor access

cfg_begin
   #MSIX programming
   msix_alarm 0 addr=0xbeefcafe0000110 data=0xbeefcace enable=1
  								    
   
#  #MSIX programming
#  msix_cq  1  addr=0x2000cafebebc000 data=0xbb331000 is_ldb=1 cq=0
#  msix_cq  2  addr=0x2010cafebebc010 data=0xbb331001 is_ldb=1 cq=1
#  msix_cq  3  addr=0x2020cafebebc020 data=0xbb331002 is_ldb=1 cq=2
#  msix_cq  4  addr=0x2030cafebebc030 data=0xbb331003 is_ldb=1 cq=3
#  msix_cq  5  addr=0x2040cafebebc040 data=0xbb331004 is_ldb=1 cq=4
#  msix_cq  6  addr=0x2050cafebebc050 data=0xbb331005 is_ldb=1 cq=5
#  msix_cq  7  addr=0x2060cafebebc060 data=0xbb331006 is_ldb=1 cq=6
#  msix_cq  8  addr=0x2070cafebebc070 data=0xbb331007 is_ldb=1 cq=7
#  msix_cq  9  addr=0x2080cafebebc080 data=0xbb331008 is_ldb=1 cq=8
#  msix_cq 10  addr=0x2090cafebebc090 data=0xbb331009 is_ldb=1 cq=9
#  msix_cq 11  addr=0x2100cafebebc100 data=0xbb331010 is_ldb=1 cq=10
#  msix_cq 12  addr=0x2110cafebebc110 data=0xbb331011 is_ldb=1 cq=11
#  msix_cq 13  addr=0x2120cafebebc120 data=0xbb331012 is_ldb=1 cq=12
#  msix_cq 14  addr=0x2130cafebebc130 data=0xbb331013 is_ldb=1 cq=13
#  msix_cq 15  addr=0x2140cafebebc140 data=0xbb331014 is_ldb=1 cq=14
#  msix_cq 16  addr=0x2150cafebebc150 data=0xbb331015 is_ldb=1 cq=15
#  msix_cq 17  addr=0x2160cafebebc160 data=0xbb331016 is_ldb=1 cq=16
#  msix_cq 18  addr=0x2170cafebebc170 data=0xbb331017 is_ldb=1 cq=17
#  msix_cq 19  addr=0x2180cafebebc180 data=0xbb331018 is_ldb=1 cq=18
#  msix_cq 20  addr=0x2190cafebebc190 data=0xbb331019 is_ldb=1 cq=19
#  msix_cq 21  addr=0x2200cafebebc200 data=0xbb331020 is_ldb=1 cq=20
#  msix_cq 22  addr=0x2210cafebebc210 data=0xbb331021 is_ldb=1 cq=21
#  msix_cq 23  addr=0x2220cafebebc220 data=0xbb331022 is_ldb=1 cq=22
#  msix_cq 24  addr=0x2230cafebebc230 data=0xbb331023 is_ldb=1 cq=23
#  msix_cq 25  addr=0x2240cafebebc240 data=0xbb331024 is_ldb=1 cq=24
#  msix_cq 26  addr=0x2250cafebebc250 data=0xbb331025 is_ldb=1 cq=25
#  msix_cq 27  addr=0x2260cafebebc260 data=0xbb331026 is_ldb=1 cq=26
#  msix_cq 28  addr=0x2270cafebebc270 data=0xbb331027 is_ldb=1 cq=27
#  msix_cq 29  addr=0x2280cafebebc280 data=0xbb331028 is_ldb=1 cq=28
#  msix_cq 30  addr=0x2290cafebebc290 data=0xbb331029 is_ldb=1 cq=29
#  msix_cq 31  addr=0x2300cafebebc300 data=0xbb331030 is_ldb=1 cq=30
#  msix_cq 32  addr=0x2310cafebebc310 data=0xbb331031 is_ldb=1 cq=31
#    
# 
#  msix_cq 33 addr=0xab001111bce0000 data=0x55aa5a00 is_ldb=0 cq=0
#  msix_cq 34 addr=0xab011111cde0100 data=0x55aa5a01 is_ldb=0 cq=1
#  msix_cq 35 addr=0xab021111bce0200 data=0x55aa5a02 is_ldb=0 cq=2
#  msix_cq 36 addr=0xab031111cde0300 data=0x55aa5a03 is_ldb=0 cq=3
#  msix_cq 37 addr=0xab041111bce0400 data=0x55aa5a04 is_ldb=0 cq=4
#  msix_cq 38 addr=0xab051111cde0500 data=0x55aa5a05 is_ldb=0 cq=5
#  msix_cq 39 addr=0xab061111bce0600 data=0x55aa5a06 is_ldb=0 cq=6
#  msix_cq 40 addr=0xab071111cde0700 data=0x55aa5a07 is_ldb=0 cq=7
#  msix_cq 41 addr=0xab081111bce0800 data=0x55aa5a08 is_ldb=0 cq=8
#  msix_cq 42 addr=0xab091111cde0900 data=0x55aa5a09 is_ldb=0 cq=9
#  msix_cq 43 addr=0xab101111bce1000 data=0x55aa5a10 is_ldb=0 cq=10
#  msix_cq 44 addr=0xab111111cde1100 data=0x55aa5a11 is_ldb=0 cq=11
#  msix_cq 45 addr=0xab121111bce1200 data=0x55aa5a12 is_ldb=0 cq=12
#  msix_cq 46 addr=0xab131111cde1300 data=0x55aa5a13 is_ldb=0 cq=13
#  msix_cq 47 addr=0xab141111bce1400 data=0x55aa5a14 is_ldb=0 cq=14
#  msix_cq 48 addr=0xab151111cde1500 data=0x55aa5a15 is_ldb=0 cq=15
#  msix_cq 49 addr=0xab161111bce1600 data=0x55aa5a16 is_ldb=0 cq=16	   
#  msix_cq 50 addr=0xab171111cde1700 data=0x55aa5a17 is_ldb=0 cq=17
#  msix_cq 51 addr=0xab181111bce1800 data=0x55aa5a18 is_ldb=0 cq=18
#  msix_cq 52 addr=0xab191111cde1900 data=0x55aa5a19 is_ldb=0 cq=19
#  msix_cq 53 addr=0xab201111bce2000 data=0x55aa5a20 is_ldb=0 cq=20
#  msix_cq 54 addr=0xab211111cde2100 data=0x55aa5a21 is_ldb=0 cq=21
#  msix_cq 55 addr=0xab221111bce2200 data=0x55aa5a22 is_ldb=0 cq=22
#  msix_cq 56 addr=0xab231111cde2300 data=0x55aa5a23 is_ldb=0 cq=23
#  msix_cq 57 addr=0xab241111bce2400 data=0x55aa5a24 is_ldb=0 cq=24
#  msix_cq 58 addr=0xab251111cde2500 data=0x55aa5a25 is_ldb=0 cq=25
#  msix_cq 59 addr=0xab261111bce2600 data=0x55aa5a26 is_ldb=0 cq=26
#  msix_cq 60 addr=0xab271111cde2700 data=0x55aa5a27 is_ldb=0 cq=27
#  msix_cq 61 addr=0xab281111bce2800 data=0x55aa5a28 is_ldb=0 cq=28
#  msix_cq 62 addr=0xab291111cde2900 data=0x55aa5a29 is_ldb=0 cq=29
#  msix_cq 63 addr=0xab301111bce3000 data=0x55aa5a30 is_ldb=0 cq=30
#  msix_cq 64 addr=0xab311111cde3100 data=0x55aa5a31 is_ldb=0 cq=31
  
  
  dir ims  0 addr=0x00000 data=0xf000   poll_mode=1
  dir ims  1 addr=0x00004 data=0x0f01   poll_mode=1
  dir ims  2 addr=0x00008 data=0x00f2   poll_mode=1
  dir ims  3 addr=0x0000c data=0x0003   poll_mode=1
  dir ims  4 addr=0x00010 data=0xf004   poll_mode=1
  dir ims  5 addr=0x00014 data=0x0f05   poll_mode=1
  dir ims  6 addr=0x00018 data=0x00f6   poll_mode=1
  dir ims  7 addr=0x0001c data=0xf007   poll_mode=1
  dir ims  8 addr=0x00020 data=0x0f08   poll_mode=1
  dir ims  9 addr=0x00024 data=0x00f9   poll_mode=1
  dir ims 10 addr=0x00028 data=0xf010   poll_mode=1
  dir ims 11 addr=0x0002c data=0x0f11   poll_mode=1
  dir ims 12 addr=0x00030 data=0xf012   poll_mode=1
  dir ims 13 addr=0x00034 data=0x0f13   poll_mode=1
  dir ims 14 addr=0x00038 data=0xf014   poll_mode=1
  dir ims 15 addr=0x0003c data=0x0f15   poll_mode=1
  dir ims 16 addr=0x00040 data=0xf016   poll_mode=1
  dir ims 17 addr=0x00044 data=0x0d17   poll_mode=1
  dir ims 18 addr=0x00048 data=0xf018   poll_mode=1
  dir ims 19 addr=0x0004c data=0x0f19   poll_mode=1
  dir ims 20 addr=0x00050 data=0xf020	poll_mode=1
  dir ims 21 addr=0x00054 data=0x0f21	poll_mode=1
  dir ims 22 addr=0x00058 data=0xf022	poll_mode=1
  dir ims 23 addr=0x0005c data=0x0f23	poll_mode=1
  dir ims 24 addr=0x00060 data=0xf024	poll_mode=1
  dir ims 25 addr=0x00064 data=0x0f25	poll_mode=1
  dir ims 26 addr=0x00068 data=0xf026	poll_mode=1
  dir ims 27 addr=0x0006c data=0x0d27	poll_mode=1
  dir ims 28 addr=0x00070 data=0xf028	poll_mode=1
  dir ims 29 addr=0x00074 data=0x0f29	poll_mode=1 
  dir ims 30 addr=0x00078 data=0xf030	poll_mode=1
  dir ims 31 addr=0x0007c data=0x0f31	poll_mode=1
  dir ims 32 addr=0x00080 data=0xf032	poll_mode=1
  dir ims 33 addr=0x00084 data=0x0f33	poll_mode=1
  dir ims 34 addr=0x00088 data=0xf034	poll_mode=1
  dir ims 35 addr=0x0008c data=0x0f35	poll_mode=1
  dir ims 36 addr=0x00090 data=0xf036	poll_mode=1
  dir ims 37 addr=0x00094 data=0x0d37	poll_mode=1
  dir ims 38 addr=0x00098 data=0xf038	poll_mode=1
  dir ims 39 addr=0x0009c data=0x0f39	poll_mode=1
  dir ims 40 addr=0x000a0 data=0xf040	poll_mode=1
  dir ims 41 addr=0x000a4 data=0x0f41	poll_mode=1
  dir ims 42 addr=0x000a8 data=0xf042	poll_mode=1
  dir ims 43 addr=0x000ac data=0x0f43	poll_mode=1
  dir ims 44 addr=0x000b0 data=0xf044	poll_mode=1
  dir ims 45 addr=0x000b4 data=0x0f45	poll_mode=1
  dir ims 46 addr=0x000b8 data=0xf046	poll_mode=1
  dir ims 47 addr=0x000bc data=0x0d47	poll_mode=1
  dir ims 48 addr=0x000c0 data=0xf048	poll_mode=1
  dir ims 49 addr=0x000c4 data=0x0f49	poll_mode=1
  dir ims 50 addr=0x000c8 data=0xf050	poll_mode=1
  dir ims 51 addr=0x000cc data=0x0f51	poll_mode=1
  dir ims 52 addr=0x000d0 data=0xf052	poll_mode=1
  dir ims 53 addr=0x000d4 data=0x0f53	poll_mode=1
  dir ims 54 addr=0x000d8 data=0xf054	poll_mode=1
  dir ims 55 addr=0x000dc data=0x0f55	poll_mode=1
  dir ims 56 addr=0x000e0 data=0xf056	poll_mode=1
  dir ims 57 addr=0x000e4 data=0x0d57	poll_mode=1
  dir ims 58 addr=0x000e8 data=0xf058	poll_mode=1
  dir ims 59 addr=0x000ec data=0x0f59	poll_mode=1	 
  dir ims 60 addr=0x000f0 data=0xf060	poll_mode=1
  dir ims 61 addr=0x000f4 data=0x0f61	poll_mode=1
  dir ims 62 addr=0x000f8 data=0xf062	poll_mode=1
  dir ims 63 addr=0x000fc data=0x0f63	poll_mode=1
   
  
  ldb ims  0 addr=0xfff00 data=0x8000	poll_mode=1
  ldb ims  1 addr=0xfff04 data=0x0801	poll_mode=1
  ldb ims  2 addr=0xfff08 data=0x0082	poll_mode=1
  ldb ims  3 addr=0xfff0c data=0x0003	poll_mode=1
  ldb ims  4 addr=0xfff10 data=0x8004	poll_mode=1
  ldb ims  5 addr=0xfff14 data=0x0805	poll_mode=1
  ldb ims  6 addr=0xfff18 data=0x0086	poll_mode=1
  ldb ims  7 addr=0xfff1c data=0x8007	poll_mode=1
  ldb ims  8 addr=0xfff20 data=0x0808	poll_mode=1
  ldb ims  9 addr=0xfff24 data=0x0089	poll_mode=1
  ldb ims 10 addr=0xfff28 data=0x8010	poll_mode=1
  ldb ims 11 addr=0xfff2c data=0x0811	poll_mode=1
  ldb ims 12 addr=0xfff30 data=0x8012	poll_mode=1
  ldb ims 13 addr=0xfff34 data=0x0813	poll_mode=1
  ldb ims 14 addr=0xfff38 data=0x8014	poll_mode=1
  ldb ims 15 addr=0xfff3c data=0x0815	poll_mode=1
  ldb ims 16 addr=0xfff40 data=0x8016	poll_mode=1
  ldb ims 17 addr=0xfff44 data=0x0817	poll_mode=1
  ldb ims 18 addr=0xfff48 data=0x8018	poll_mode=1
  ldb ims 19 addr=0xfff4c data=0x0819	poll_mode=1
  ldb ims 20 addr=0xfff50 data=0x8020	poll_mode=1
  ldb ims 21 addr=0xfff54 data=0x0821	poll_mode=1
  ldb ims 22 addr=0xfff58 data=0x8022	poll_mode=1
  ldb ims 23 addr=0xfff5c data=0x0823	poll_mode=1
  ldb ims 24 addr=0xfff60 data=0x8024	poll_mode=1
  ldb ims 25 addr=0xfff64 data=0x0825	poll_mode=1
  ldb ims 26 addr=0xfff68 data=0x8026	poll_mode=1
  ldb ims 27 addr=0xfff6c data=0x0827	poll_mode=1
  ldb ims 28 addr=0xfff70 data=0x8028	poll_mode=1
  ldb ims 29 addr=0xfff74 data=0x0829	poll_mode=1
  ldb ims 30 addr=0xfff78 data=0x8030	poll_mode=1
  ldb ims 31 addr=0xfff7c data=0x0831	poll_mode=1
  ldb ims 32 addr=0xfff80 data=0x8032	poll_mode=1
  ldb ims 33 addr=0xfff84 data=0x0833	poll_mode=1
  ldb ims 34 addr=0xfff88 data=0x8034	poll_mode=1
  ldb ims 35 addr=0xfff8c data=0x0835	poll_mode=1
  ldb ims 36 addr=0xfff90 data=0x8036	poll_mode=1
  ldb ims 37 addr=0xfff94 data=0x0837	poll_mode=1
  ldb ims 38 addr=0xfff98 data=0x8038	poll_mode=1
  ldb ims 39 addr=0xfff9c data=0x0839	poll_mode=1
  ldb ims 40 addr=0xfffa0 data=0x8040	poll_mode=1
  ldb ims 41 addr=0xfffa4 data=0x0841	poll_mode=1
  ldb ims 42 addr=0xfffa8 data=0x8042	poll_mode=1
  ldb ims 43 addr=0xfffac data=0x0843	poll_mode=1
  ldb ims 44 addr=0xfffb0 data=0x8044	poll_mode=1
  ldb ims 45 addr=0xfffb4 data=0x0845	poll_mode=1
  ldb ims 46 addr=0xfffb8 data=0x8046	poll_mode=1
  ldb ims 47 addr=0xfffbc data=0x0847	poll_mode=1
  ldb ims 48 addr=0xfffc0 data=0x8048	poll_mode=1
  ldb ims 49 addr=0xfffc4 data=0x0849	poll_mode=1
  ldb ims 50 addr=0xfffc8 data=0x8050	poll_mode=1
  ldb ims 51 addr=0xfffcc data=0x0851	poll_mode=1
  ldb ims 52 addr=0xfffd0 data=0x8052	poll_mode=1
  ldb ims 53 addr=0xfffd4 data=0x0853	poll_mode=1
  ldb ims 54 addr=0xfffd8 data=0x8054	poll_mode=1
  ldb ims 55 addr=0xfffdc data=0x0855	poll_mode=1
  ldb ims 56 addr=0xfffe0 data=0x8056	poll_mode=1
  ldb ims 57 addr=0xfffe4 data=0x0857	poll_mode=1
  ldb ims 58 addr=0xfffe8 data=0x8058	poll_mode=1
  ldb ims 59 addr=0xfffec data=0x0859	poll_mode=1
  ldb ims 60 addr=0xffff0 data=0x8060	poll_mode=1
  ldb ims 61 addr=0xffff4 data=0x0861	poll_mode=1
  ldb ims 62 addr=0xffff8 data=0x8062	poll_mode=1
  ldb ims 63 addr=0xffffc data=0x0863	poll_mode=1   
   
  dir qid 0
  dir qid 1
  dir qid 2
  dir qid 3

  ldb qid 0 qid_ldb_inflight_limit=512 fid_cfg_v=1 fid_limit=1024
  ldb qid 1 qid_ldb_inflight_limit=512 fid_cfg_v=1 fid_limit=1024
  ldb qid 2 qid_ldb_inflight_limit=512 fid_cfg_v=1 fid_limit=1024
  ldb qid 3 qid_ldb_inflight_limit=512 fid_cfg_v=1 fid_limit=1024

  vas 0  credit_cnt=4096 
  vas 0  dir_qidv0=1 dir_qidv1=1 dir_qidv2=1 dir_qidv3=1
  vas 0  ldb_qidv0=1 ldb_qidv1=1 ldb_qidv2=1 ldb_qidv3=1

  dir pp 0  vas=0
  dir pp 1  vas=0
  dir pp 2  vas=0
  dir pp 3  vas=0

  dir cq 0  cq_depth=8  gpa=sm cq_timer_intr_thresh=2 cq_timer_intr_ena=0 cq_depth_intr_thresh=7  cq_depth_intr_ena=1  cq_cwdt_intr_ena=1
  dir cq 1  cq_depth=16 gpa=sm cq_timer_intr_thresh=2 cq_timer_intr_ena=0 cq_depth_intr_thresh=15 cq_depth_intr_ena=1  cq_cwdt_intr_ena=1
  dir cq 2  cq_depth=16 gpa=sm cq_timer_intr_thresh=2 cq_timer_intr_ena=0 cq_depth_intr_thresh=15 cq_depth_intr_ena=1  cq_cwdt_intr_ena=1
  dir cq 3  cq_depth=8  gpa=sm cq_timer_intr_thresh=2 cq_timer_intr_ena=0 cq_depth_intr_thresh=7  cq_depth_intr_ena=1  cq_cwdt_intr_ena=1

  ldb pp 0  vas=0
  ldb pp 1  vas=0
  ldb pp 2  vas=0
  ldb pp 3  vas=0

  ldb cq 0  wu_limit=4097 cq_depth=16 gpa=sm hist_list_base=0x000 hist_list_limit=0x1ff qidv0=1 qidix0=0 pri0=0 qidv1=0 qidix1=1 pri1=0 qidv2=0 qidix2=2 pri0=0 qidv3=0 qidix3=3 pri3=0 cq_timer_intr_thresh=2 cq_timer_intr_ena=0 cq_depth_intr_thresh=15 cq_depth_intr_ena=1  cq_cwdt_intr_ena=1
  ldb cq 1  wu_limit=4095 cq_depth=8  gpa=sm hist_list_base=0x200 hist_list_limit=0x3ff qidv0=0 qidix0=0 pri0=0 qidv1=1 qidix1=1 pri1=0 qidv2=0 qidix2=2 pri0=0 qidv3=0 qidix3=3 pri3=0 cq_timer_intr_thresh=2 cq_timer_intr_ena=0 cq_depth_intr_thresh=7 cq_depth_intr_ena=1  cq_cwdt_intr_ena=1
  ldb cq 2  wu_limit=4095 cq_depth=8  gpa=sm hist_list_base=0x400 hist_list_limit=0x5ff qidv0=0 qidix0=0 pri0=0 qidv1=0 qidix1=1 pri1=0 qidv2=1 qidix2=2 pri0=0 qidv3=0 qidix3=3 pri3=0 cq_timer_intr_thresh=2 cq_timer_intr_ena=0 cq_depth_intr_thresh=7 cq_depth_intr_ena=1  cq_cwdt_intr_ena=1
  ldb cq 3  wu_limit=4097 cq_depth=16 gpa=sm hist_list_base=0x600 hist_list_limit=0x7ff qidv0=0 qidix0=0 pri0=0 qidv1=0 qidix1=1 pri1=0 qidv2=0 qidix2=2 pri0=0 qidv3=1 qidix3=3 pri3=0 cq_timer_intr_thresh=2 cq_timer_intr_ena=0 cq_depth_intr_thresh=15 cq_depth_intr_ena=1  cq_cwdt_intr_ena=1


cfg_end

##ingress alarm enable
#wr hqm_system_csr.ingress_alarm_enable 0xffffffff
#rd hqm_system_csr.ingress_alarm_enable 0x0000003f



wr credit_hist_pipe.cfg_dir_cq_intr_armed0 0xffffffff
wr credit_hist_pipe.cfg_dir_cq_intr_armed1 0xffffffff

wr credit_hist_pipe.cfg_dir_cq_timer_ctl.enb 1
wr credit_hist_pipe.cfg_dir_cq_timer_ctl.sample_interval 1

wr credit_hist_pipe.cfg_ldb_cq_intr_armed0 0xffffffff
wr credit_hist_pipe.cfg_ldb_cq_intr_armed1 0xffffffff
wr credit_hist_pipe.cfg_ldb_cq_timer_ctl.enb 1
wr credit_hist_pipe.cfg_ldb_cq_timer_ctl.sample_interval 1

rd credit_hist_pipe.cfg_dir_cq_intr_armed0
rd credit_hist_pipe.cfg_dir_cq_intr_armed1

rd credit_hist_pipe.cfg_ldb_cq_intr_armed0
rd credit_hist_pipe.cfg_ldb_cq_intr_armed1


