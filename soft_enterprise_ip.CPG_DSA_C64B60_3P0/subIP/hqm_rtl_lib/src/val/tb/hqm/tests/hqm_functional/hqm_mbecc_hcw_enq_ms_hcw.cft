## any MB ECC on ingress HCW will drop the HCW
# v=1 m=1 src=0 unit=1 aid=44 cls=2 alarm=1 rtype=0 rid=0

#########################################################################################################################
# Inject MB ECC errors
wr hqm_system_csr.ecc_ctl.INJ_MB_ECC_HCW_ENQ_MS 1
rd hqm_system_csr.ecc_ctl.INJ_MB_ECC_HCW_ENQ_MS 1

HCW DIR:51 qe_valid=1 qe_orsp=0 qe_uhl=0 cq_pop=0 meas=0 lockid=0x123 msgtype=0 qpri=0 qtype=dir qid=51 dsi=0x300  ingress_drop=1
idle 500

HCW DIR:2  qe_valid=1 qe_orsp=0 qe_uhl=0 cq_pop=0 meas=0 lockid=0x123 msgtype=0 qpri=0 qtype=dir qid=2  dsi=0x300  
HCW DIR:6  qe_valid=1 qe_orsp=0 qe_uhl=0 cq_pop=0 meas=0 lockid=0x124 msgtype=0 qpri=0 qtype=dir qid=6  dsi=0x300   
HCW DIR:2  qe_valid=1 qe_orsp=0 qe_uhl=0 cq_pop=0 meas=0 lockid=0x125 msgtype=0 qpri=0 qtype=dir qid=2  dsi=0x300 
HCW DIR:6  qe_valid=1 qe_orsp=0 qe_uhl=0 cq_pop=0 meas=0 lockid=0x126 msgtype=0 qpri=0 qtype=dir qid=6  dsi=0x300   
HCW DIR:2  qe_valid=1 qe_orsp=0 qe_uhl=0 cq_pop=0 meas=0 lockid=0x127 msgtype=0 qpri=0 qtype=dir qid=2  dsi=0x300 
HCW DIR:6  qe_valid=1 qe_orsp=0 qe_uhl=0 cq_pop=0 meas=0 lockid=0x128 msgtype=0 qpri=0 qtype=dir qid=6  dsi=0x300   
HCW DIR:2  qe_valid=1 qe_orsp=0 qe_uhl=0 cq_pop=0 meas=0 lockid=0x129 msgtype=0 qpri=0 qtype=dir qid=2  dsi=0x300 
HCW DIR:6  qe_valid=1 qe_orsp=0 qe_uhl=0 cq_pop=0 meas=0 lockid=0x130 msgtype=0 qpri=0 qtype=dir qid=6  dsi=0x300   

HCW DIR:51 qe_valid=1 qe_orsp=0 qe_uhl=0 cq_pop=0 meas=0 lockid=0x123 msgtype=0 qpri=0 qtype=dir qid=51 dsi=0x300 
HCW DIR:51 qe_valid=1 qe_orsp=0 qe_uhl=0 cq_pop=0 meas=0 lockid=0x123 msgtype=0 qpri=0 qtype=dir qid=51 dsi=0x300 
HCW DIR:51 qe_valid=1 qe_orsp=0 qe_uhl=0 cq_pop=0 meas=0 lockid=0x123 msgtype=0 qpri=0 qtype=dir qid=51 dsi=0x300 
HCW DIR:51 qe_valid=1 qe_orsp=0 qe_uhl=0 cq_pop=0 meas=0 lockid=0x123 msgtype=0 qpri=0 qtype=dir qid=51 dsi=0x300 

HCW DIR:13 qe_valid=1 qe_orsp=0 qe_uhl=0 cq_pop=0 meas=0 lockid=0x123 msgtype=0 qpri=0 qtype=dir qid=13 dsi=0x300  
HCW DIR:13 qe_valid=1 qe_orsp=0 qe_uhl=0 cq_pop=0 meas=0 lockid=0x123 msgtype=0 qpri=0 qtype=dir qid=13 dsi=0x300 
HCW DIR:13 qe_valid=1 qe_orsp=0 qe_uhl=0 cq_pop=0 meas=0 lockid=0x123 msgtype=0 qpri=0 qtype=dir qid=13 dsi=0x300 
HCW DIR:13 qe_valid=1 qe_orsp=0 qe_uhl=0 cq_pop=0 meas=0 lockid=0x123 msgtype=0 qpri=0 qtype=dir qid=13 dsi=0x300 

#idle 1000
poll_sch dir:2  0x4 20 100
poll_sch dir:6  0x4 20 100
poll_sch dir:13 0x4 200 100
poll_sch dir:51 0x4 200 100
msix_alarm_wait 500
rd hqm_system_csr.alarm_mb_ecc_err   0x00000000 ##no bit for ingress
rd hqm_system_csr.alarm_hw_synd      0x806C8533 0xffffffff  
## clear
wr hqm_system_csr.alarm_hw_synd      0x80000000
wr hqm_system_csr.msix_ack.MSIX_0_ACK 1
rd hqm_system_csr.msix_ack.MSIX_0_ACK 0
idle 1000

## Now reset the sb ecc, send hcw
wr hqm_system_csr.ecc_ctl.INJ_MB_ECC_HCW_ENQ_MS 0
rd hqm_system_csr.ecc_ctl.INJ_MB_ECC_HCW_ENQ_MS 0
idle 100
HCW LDB:2  vf_num=0 qe_valid=1 qe_orsp=0 qe_uhl=0 cq_pop=0 meas=0 lockid=0x123 msgtype=0 qpri=0 qtype=uno qid=3  dsi=0x300
HCW DIR:2  qe_valid=1 qe_orsp=0 qe_uhl=0 cq_pop=0 meas=0 lockid=0x131 msgtype=0 qpri=0 qtype=dir qid=2  dsi=0x300
HCW LDB:2  vf_num=0 qe_valid=1 qe_orsp=0 qe_uhl=0 cq_pop=0 meas=0 lockid=0x123 msgtype=0 qpri=0 qtype=uno qid=3  dsi=0x300
HCW DIR:2  qe_valid=1 qe_orsp=0 qe_uhl=0 cq_pop=0 meas=0 lockid=0x131 msgtype=0 qpri=0 qtype=dir qid=2  dsi=0x300
HCW LDB:2  vf_num=0 qe_valid=1 qe_orsp=0 qe_uhl=0 cq_pop=0 meas=0 lockid=0x123 msgtype=0 qpri=0 qtype=uno qid=3  dsi=0x300
HCW DIR:2  qe_valid=1 qe_orsp=0 qe_uhl=0 cq_pop=0 meas=0 lockid=0x131 msgtype=0 qpri=0 qtype=dir qid=2  dsi=0x300
HCW LDB:2  vf_num=0 qe_valid=1 qe_orsp=0 qe_uhl=0 cq_pop=0 meas=0 lockid=0x123 msgtype=0 qpri=0 qtype=uno qid=3  dsi=0x300
HCW DIR:2  qe_valid=1 qe_orsp=0 qe_uhl=0 cq_pop=0 meas=0 lockid=0x131 msgtype=0 qpri=0 qtype=dir qid=2  dsi=0x300

HCW LDB:21  qe_valid=1 qe_orsp=0 qe_uhl=0 cq_pop=0 meas=0 lockid=0x123 msgtype=0 qpri=0 qtype=uno qid=6  dsi=0x300
HCW DIR:2  vf_num=0  qe_valid=1 qe_orsp=0 qe_uhl=0 cq_pop=0 meas=0 lockid=0x03 msgtype=0 qpri=0 qtype=dir qid=2  dsi=0x300 
HCW LDB:21  qe_valid=1 qe_orsp=0 qe_uhl=0 cq_pop=0 meas=0 lockid=0x123 msgtype=0 qpri=0 qtype=uno qid=6  dsi=0x300
HCW DIR:2  vf_num=0  qe_valid=1 qe_orsp=0 qe_uhl=0 cq_pop=0 meas=0 lockid=0x03 msgtype=0 qpri=0 qtype=dir qid=2  dsi=0x300 
HCW LDB:21  qe_valid=1 qe_orsp=0 qe_uhl=0 cq_pop=0 meas=0 lockid=0x123 msgtype=0 qpri=0 qtype=uno qid=6  dsi=0x300
HCW DIR:2  vf_num=0  qe_valid=1 qe_orsp=0 qe_uhl=0 cq_pop=0 meas=0 lockid=0x03 msgtype=0 qpri=0 qtype=dir qid=2  dsi=0x300 
HCW LDB:21  qe_valid=1 qe_orsp=0 qe_uhl=0 cq_pop=0 meas=0 lockid=0x123 msgtype=0 qpri=0 qtype=uno qid=6  dsi=0x300
HCW DIR:2  vf_num=0  qe_valid=1 qe_orsp=0 qe_uhl=0 cq_pop=0 meas=0 lockid=0x03 msgtype=0 qpri=0 qtype=dir qid=2  dsi=0x300 

poll_sch ldb:40 0x4 100 100
poll_sch ldb:21 0x4 100 100
poll_sch dir:2  0x8 200 100
poll_sch dir:12 0x4 200 100

##set mb ecc
wr hqm_system_csr.ecc_ctl.INJ_MB_ECC_HCW_ENQ_MS 1
rd hqm_system_csr.ecc_ctl.INJ_MB_ECC_HCW_ENQ_MS 1

HCW LDB:21 vf_num=10 qe_valid=1 qe_orsp=0 qe_uhl=0 cq_pop=0 meas=0 lockid=0x123 msgtype=0 qpri=0 qtype=uno qid=31  dsi=0x300 ingress_drop=1
idle 500

HCW LDB:21 vf_num=10 qe_valid=1 qe_orsp=0 qe_uhl=0 cq_pop=0 meas=0 lockid=0x123 msgtype=0 qpri=0 qtype=uno qid=31  dsi=0x300 
HCW LDB:21 vf_num=10 qe_valid=1 qe_orsp=0 qe_uhl=0 cq_pop=0 meas=0 lockid=0x123 msgtype=0 qpri=0 qtype=uno qid=31  dsi=0x300 
HCW LDB:21 vf_num=10 qe_valid=1 qe_orsp=0 qe_uhl=0 cq_pop=0 meas=0 lockid=0x123 msgtype=0 qpri=0 qtype=uno qid=31  dsi=0x300 
HCW LDB:21 vf_num=10 qe_valid=1 qe_orsp=0 qe_uhl=0 cq_pop=0 meas=0 lockid=0x123 msgtype=0 qpri=0 qtype=uno qid=31  dsi=0x300 

HCW DIR:2  qe_valid=1 qe_orsp=0 qe_uhl=0 cq_pop=0 meas=0 lockid=0x123 msgtype=0 qpri=0 qtype=dir qid=2   dsi=0x300
HCW DIR:2  qe_valid=1 qe_orsp=0 qe_uhl=0 cq_pop=0 meas=0 lockid=0x123 msgtype=0 qpri=0 qtype=dir qid=2   dsi=0x300
HCW DIR:2  qe_valid=1 qe_orsp=0 qe_uhl=0 cq_pop=0 meas=0 lockid=0x123 msgtype=0 qpri=0 qtype=dir qid=2   dsi=0x300
HCW DIR:2  qe_valid=1 qe_orsp=0 qe_uhl=0 cq_pop=0 meas=0 lockid=0x123 msgtype=0 qpri=0 qtype=dir qid=2   dsi=0x300

HCW DIR:13 qe_valid=1 qe_orsp=0 qe_uhl=0 cq_pop=0 meas=0 lockid=0x123 msgtype=0 qpri=0 qtype=dir qid=13  dsi=0x300
HCW DIR:13 qe_valid=1 qe_orsp=0 qe_uhl=0 cq_pop=0 meas=0 lockid=0x123 msgtype=0 qpri=0 qtype=dir qid=13  dsi=0x300
HCW DIR:13 qe_valid=1 qe_orsp=0 qe_uhl=0 cq_pop=0 meas=0 lockid=0x123 msgtype=0 qpri=0 qtype=dir qid=13  dsi=0x300
HCW DIR:13 qe_valid=1 qe_orsp=0 qe_uhl=0 cq_pop=0 meas=0 lockid=0x123 msgtype=0 qpri=0 qtype=dir qid=13  dsi=0x300

HCW DIR:51 qe_valid=1 qe_orsp=0 qe_uhl=0 cq_pop=0 meas=0 lockid=0x123 msgtype=0 qpri=0 qtype=dir qid=51  dsi=0x300
HCW DIR:51 qe_valid=1 qe_orsp=0 qe_uhl=0 cq_pop=0 meas=0 lockid=0x123 msgtype=0 qpri=0 qtype=dir qid=51  dsi=0x300
HCW DIR:51 qe_valid=1 qe_orsp=0 qe_uhl=0 cq_pop=0 meas=0 lockid=0x123 msgtype=0 qpri=0 qtype=dir qid=51  dsi=0x300
HCW DIR:51 qe_valid=1 qe_orsp=0 qe_uhl=0 cq_pop=0 meas=0 lockid=0x123 msgtype=0 qpri=0 qtype=dir qid=51  dsi=0x300

poll_sch ldb:62 0x4 200 100
poll_sch dir:2  0xc 200 100
poll_sch dir:13 0x8 200 100
poll_sch dir:51 0x8 200 100
msix_alarm_wait 500
rd hqm_system_csr.alarm_hw_synd      0x806CA515 0xffffffff  

##token and completion
HCW LDB:2  vf_num=0 qe_valid=0 qe_orsp=0 qe_uhl=1 cq_pop=1 meas=0 lockid=0x000 msgtype=0 qpri=0 qtype=uno qid=3  dsi=0x300
HCW LDB:2  vf_num=0 qe_valid=0 qe_orsp=0 qe_uhl=1 cq_pop=1 meas=0 lockid=0x000 msgtype=0 qpri=0 qtype=uno qid=3  dsi=0x300
HCW LDB:2  vf_num=0 qe_valid=0 qe_orsp=0 qe_uhl=1 cq_pop=1 meas=0 lockid=0x000 msgtype=0 qpri=0 qtype=uno qid=3  dsi=0x300
HCW LDB:2  vf_num=0 qe_valid=0 qe_orsp=0 qe_uhl=1 cq_pop=1 meas=0 lockid=0x000 msgtype=0 qpri=0 qtype=uno qid=3  dsi=0x300

HCW LDB:21 qe_valid=0 qe_orsp=0 qe_uhl=1 cq_pop=1 meas=0 lockid=0x000 msgtype=0 qpri=0 qtype=uno qid=6  dsi=0x300
HCW LDB:21 qe_valid=0 qe_orsp=0 qe_uhl=1 cq_pop=1 meas=0 lockid=0x000 msgtype=0 qpri=0 qtype=uno qid=6  dsi=0x300
HCW LDB:21 qe_valid=0 qe_orsp=0 qe_uhl=1 cq_pop=1 meas=0 lockid=0x000 msgtype=0 qpri=0 qtype=uno qid=6  dsi=0x300
HCW LDB:21 qe_valid=0 qe_orsp=0 qe_uhl=1 cq_pop=1 meas=0 lockid=0x000 msgtype=0 qpri=0 qtype=uno qid=6  dsi=0x300

HCW LDB:21 vf_num=10 qe_valid=0 qe_orsp=0 qe_uhl=1 cq_pop=1 meas=0 lockid=0x000 msgtype=0 qpri=0 qtype=uno qid=31  dsi=0x300 
HCW LDB:21 vf_num=10 qe_valid=0 qe_orsp=0 qe_uhl=1 cq_pop=1 meas=0 lockid=0x000 msgtype=0 qpri=0 qtype=uno qid=31  dsi=0x300 
HCW LDB:21 vf_num=10 qe_valid=0 qe_orsp=0 qe_uhl=1 cq_pop=1 meas=0 lockid=0x000 msgtype=0 qpri=0 qtype=uno qid=31  dsi=0x300 
HCW LDB:21 vf_num=10 qe_valid=0 qe_orsp=0 qe_uhl=1 cq_pop=1 meas=0 lockid=0x000 msgtype=0 qpri=0 qtype=uno qid=31  dsi=0x300 

##toekn return 
HCW DIR:2  vf_num=0 qe_valid=0 qe_orsp=0 qe_uhl=0 cq_pop=1 meas=0 lockid=0x03 msgtype=0 qpri=0 qtype=dir qid=2  dsi=0x300 
HCW DIR:2  qe_valid=0 qe_orsp=0 qe_uhl=0 cq_pop=1 meas=0 lockid=0x0b msgtype=0 qpri=0 qtype=dir qid=2  dsi=0x300
HCW DIR:6  qe_valid=0 qe_orsp=0 qe_uhl=0 cq_pop=1 meas=0 lockid=0x03 msgtype=0 qpri=0 qtype=dir qid=6  dsi=0x300
HCW DIR:13 qe_valid=0 qe_orsp=0 qe_uhl=0 cq_pop=1 meas=0 lockid=0x07 msgtype=0 qpri=0 qtype=dir qid=13 dsi=0x300
HCW DIR:51 qe_valid=0 qe_orsp=0 qe_uhl=0 cq_pop=1 meas=0 lockid=0x07 msgtype=0 qpri=0 qtype=dir qid=51 dsi=0x300
## clear msix
wr hqm_system_csr.msix_ack.MSIX_0_ACK 1
rd hqm_system_csr.msix_ack.MSIX_0_ACK 0
idle 1000

