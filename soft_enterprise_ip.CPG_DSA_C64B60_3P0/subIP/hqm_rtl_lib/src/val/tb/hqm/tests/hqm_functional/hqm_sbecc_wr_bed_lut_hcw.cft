## Inj Sb Ecc Cfg (WRITE_BAD_SB_ECC) 
## if set, LUT writes will insert a single bit ECC error
## alarm_sb_ecc_err 
## alarm_hw_synd: source=0, unit=1,aid=4,cls=1, [13]is_ldb, [9:8] rtype=0 [7:0]=lut_addr/vpp
## {vf0: vpp2pp-12} {vf7:vpp2pp-692}; {vf10:vpp2pp-980}; {vf15:vpp2pp-1470}
#########################################################################################################################
# Inject SB ECC errors
wr hqm_system_csr.sys_alarm_sb_ecc_int_enable 0xffffffff
wr hqm_system_csr.ecc_ctl.WRITE_BAD_SB_ECC 1
rd hqm_system_csr.ecc_ctl.WRITE_BAD_SB_ECC 1
wr hqm_system_csr.vf_dir_vpp2pp[2]     0xc
rd hqm_system_csr.vf_dir_vpp2pp[2]     0xc
msix_alarm_wait 2000
## clear msix
wr hqm_system_csr.msix_ack.MSIX_0_ACK 1
rd hqm_system_csr.msix_ack.MSIX_0_ACK 0

wr hqm_system_csr.vf_dir_vpp2pp[692] 0x1f
rd hqm_system_csr.vf_dir_vpp2pp[692] 0x1f
msix_alarm_wait 2000
## clear msix
wr hqm_system_csr.msix_ack.MSIX_0_ACK 1
rd hqm_system_csr.msix_ack.MSIX_0_ACK 0

HCW DIR:2  qe_valid=1 qe_orsp=0 qe_uhl=0 cq_pop=0 meas=0 lockid=0x123 msgtype=0 qpri=0 qtype=dir qid=2  dsi=0x300 
HCW DIR:2  qe_valid=1 qe_orsp=0 qe_uhl=0 cq_pop=0 meas=0 lockid=0x123 msgtype=0 qpri=0 qtype=dir qid=2  dsi=0x300
HCW DIR:2  qe_valid=1 qe_orsp=0 qe_uhl=0 cq_pop=0 meas=0 lockid=0x123 msgtype=0 qpri=0 qtype=dir qid=2  dsi=0x300
HCW DIR:2  qe_valid=1 qe_orsp=0 qe_uhl=0 cq_pop=0 meas=0 lockid=0x123 msgtype=0 qpri=0 qtype=dir qid=2  dsi=0x300

HCW DIR:2 vf_num=0 qe_valid=1 qe_orsp=0 qe_uhl=0 cq_pop=0 meas=0 lockid=0x123 msgtype=0 qpri=0 qtype=dir qid=2  dsi=0x300 batch=1
HCW DIR:2 vf_num=0 qe_valid=1 qe_orsp=0 qe_uhl=0 cq_pop=0 meas=0 lockid=0x123 msgtype=0 qpri=0 qtype=dir qid=2  dsi=0x300 batch=1
HCW DIR:2 vf_num=0 qe_valid=1 qe_orsp=0 qe_uhl=0 cq_pop=0 meas=0 lockid=0x123 msgtype=0 qpri=0 qtype=dir qid=2  dsi=0x300 batch=1
HCW DIR:2 vf_num=0 qe_valid=1 qe_orsp=0 qe_uhl=0 cq_pop=0 meas=0 lockid=0x123 msgtype=0 qpri=0 qtype=dir qid=2  dsi=0x300

msix_alarm_wait 2000
## clear msix
wr hqm_system_csr.msix_ack.MSIX_0_ACK 1
rd hqm_system_csr.msix_ack.MSIX_0_ACK 0


HCW DIR:20 vf_num=7 qe_valid=1 qe_orsp=0 qe_uhl=0 cq_pop=0 meas=0 lockid=0x123 msgtype=0 qpri=0 qtype=dir qid=20  dsi=0x300 batch=1 
HCW DIR:20 vf_num=7 qe_valid=1 qe_orsp=0 qe_uhl=0 cq_pop=0 meas=0 lockid=0x123 msgtype=0 qpri=0 qtype=dir qid=20  dsi=0x300 batch=1
HCW DIR:20 vf_num=7 qe_valid=1 qe_orsp=0 qe_uhl=0 cq_pop=0 meas=0 lockid=0x123 msgtype=0 qpri=0 qtype=dir qid=20  dsi=0x300 batch=1
HCW DIR:20 vf_num=7 qe_valid=1 qe_orsp=0 qe_uhl=0 cq_pop=0 meas=0 lockid=0x123 msgtype=0 qpri=0 qtype=dir qid=20  dsi=0x300
msix_alarm_wait 2000
## clear msix
wr hqm_system_csr.msix_ack.MSIX_0_ACK 1
rd hqm_system_csr.msix_ack.MSIX_0_ACK 0

HCW DIR:20 vf_num=10 qe_valid=1 qe_orsp=0 qe_uhl=0 cq_pop=0 meas=0 lockid=0x123 msgtype=0 qpri=0 qtype=dir qid=20  dsi=0x300 
HCW DIR:20 vf_num=10 qe_valid=1 qe_orsp=0 qe_uhl=0 cq_pop=0 meas=0 lockid=0x123 msgtype=0 qpri=0 qtype=dir qid=20  dsi=0x300 
HCW DIR:20 vf_num=10 qe_valid=1 qe_orsp=0 qe_uhl=0 cq_pop=0 meas=0 lockid=0x123 msgtype=0 qpri=0 qtype=dir qid=20  dsi=0x300 
HCW DIR:20 vf_num=10 qe_valid=1 qe_orsp=0 qe_uhl=0 cq_pop=0 meas=0 lockid=0x123 msgtype=0 qpri=0 qtype=dir qid=20  dsi=0x300

HCW DIR:30 vf_num=15 qe_valid=1 qe_orsp=0 qe_uhl=0 cq_pop=0 meas=0 lockid=0x123 msgtype=0 qpri=0 qtype=dir qid=30  dsi=0x300 
HCW DIR:30 vf_num=15 qe_valid=1 qe_orsp=0 qe_uhl=0 cq_pop=0 meas=0 lockid=0x123 msgtype=0 qpri=0 qtype=dir qid=30  dsi=0x300 
HCW DIR:30 vf_num=15 qe_valid=1 qe_orsp=0 qe_uhl=0 cq_pop=0 meas=0 lockid=0x123 msgtype=0 qpri=0 qtype=dir qid=30  dsi=0x300 
HCW DIR:30 vf_num=15 qe_valid=1 qe_orsp=0 qe_uhl=0 cq_pop=0 meas=0 lockid=0x123 msgtype=0 qpri=0 qtype=dir qid=30  dsi=0x300

HCW DIR:6  qe_valid=1 qe_orsp=0 qe_uhl=0 cq_pop=0 meas=0 lockid=0x123 msgtype=0 qpri=0 qtype=dir qid=6  dsi=0x300 
HCW DIR:6  qe_valid=1 qe_orsp=0 qe_uhl=0 cq_pop=0 meas=0 lockid=0x123 msgtype=0 qpri=0 qtype=dir qid=6  dsi=0x300
HCW DIR:6  qe_valid=1 qe_orsp=0 qe_uhl=0 cq_pop=0 meas=0 lockid=0x123 msgtype=0 qpri=0 qtype=dir qid=6  dsi=0x300
HCW DIR:6  qe_valid=1 qe_orsp=0 qe_uhl=0 cq_pop=0 meas=0 lockid=0x123 msgtype=0 qpri=0 qtype=dir qid=6  dsi=0x300

HCW DIR:13 qe_valid=1 qe_orsp=0 qe_uhl=0 cq_pop=0 meas=0 lockid=0x123 msgtype=0 qpri=0 qtype=dir qid=13 dsi=0x300
HCW DIR:13 qe_valid=1 qe_orsp=0 qe_uhl=0 cq_pop=0 meas=0 lockid=0x123 msgtype=0 qpri=0 qtype=dir qid=13 dsi=0x300
HCW DIR:13 qe_valid=1 qe_orsp=0 qe_uhl=0 cq_pop=0 meas=0 lockid=0x123 msgtype=0 qpri=0 qtype=dir qid=13 dsi=0x300
HCW DIR:13 qe_valid=1 qe_orsp=0 qe_uhl=0 cq_pop=0 meas=0 lockid=0x123 msgtype=0 qpri=0 qtype=dir qid=13 dsi=0x300

HCW DIR:51 qe_valid=1 qe_orsp=0 qe_uhl=0 cq_pop=0 meas=0 lockid=0x123 msgtype=0 qpri=0 qtype=dir qid=51 dsi=0x300
HCW DIR:51 qe_valid=1 qe_orsp=0 qe_uhl=0 cq_pop=0 meas=0 lockid=0x123 msgtype=0 qpri=0 qtype=dir qid=51 dsi=0x300
HCW DIR:51 qe_valid=1 qe_orsp=0 qe_uhl=0 cq_pop=0 meas=0 lockid=0x123 msgtype=0 qpri=0 qtype=dir qid=51 dsi=0x300
HCW DIR:51 qe_valid=1 qe_orsp=0 qe_uhl=0 cq_pop=0 meas=0 lockid=0x123 msgtype=0 qpri=0 qtype=dir qid=51 dsi=0x300

poll_sch dir:2   0x4 200 100
poll_sch dir:12  0x4 200 100
poll_sch dir:31  0x4 200 100
poll_sch dir:40  0x4 200 100
poll_sch dir:62  0x4 200 100
poll_sch dir:6   0x4 200 100
poll_sch dir:13  0x4 200 100
poll_sch dir:51  0x4 200 100
rd hqm_system_csr.sbe_cnt_0          0x0000000a ##8 HCW 2 rd vpp2pp
rd hqm_system_csr.sbe_cnt_1          0x00000000
rd hqm_system_csr.alarm_sb_ecc_err   0x00000020 
rd hqm_system_csr.alarm_hw_synd      0xC0454402 0xffffffff  
wr hqm_system_csr.alarm_hw_synd      0x80000000
##clear 
wr hqm_system_csr.alarm_sb_ecc_err   0x00000020
rd hqm_system_csr.alarm_sb_ecc_err   0x00000000
idle 1000
## Now reset the sb ecc, send hcw
wr hqm_system_csr.ecc_ctl.WRITE_BAD_SB_ECC 0
rd hqm_system_csr.ecc_ctl.WRITE_BAD_SB_ECC 0
idle 100
HCW DIR:13 qe_valid=1 qe_orsp=0 qe_uhl=0 cq_pop=0 meas=0 lockid=0x123 msgtype=0 qpri=0 qtype=dir qid=13 dsi=0x300
HCW DIR:13 qe_valid=1 qe_orsp=0 qe_uhl=0 cq_pop=0 meas=0 lockid=0x123 msgtype=0 qpri=0 qtype=dir qid=13 dsi=0x300
HCW DIR:13 qe_valid=1 qe_orsp=0 qe_uhl=0 cq_pop=0 meas=0 lockid=0x123 msgtype=0 qpri=0 qtype=dir qid=13 dsi=0x300
HCW DIR:13 qe_valid=1 qe_orsp=0 qe_uhl=0 cq_pop=0 meas=0 lockid=0x123 msgtype=0 qpri=0 qtype=dir qid=13 dsi=0x300

HCW DIR:20 vf_num=10 qe_valid=1 qe_orsp=0 qe_uhl=0 cq_pop=0 meas=0 lockid=0x123 msgtype=0 qpri=0 qtype=dir qid=20  dsi=0x300 
HCW DIR:20 vf_num=10 qe_valid=1 qe_orsp=0 qe_uhl=0 cq_pop=0 meas=0 lockid=0x123 msgtype=0 qpri=0 qtype=dir qid=20  dsi=0x300 
HCW DIR:20 vf_num=10 qe_valid=1 qe_orsp=0 qe_uhl=0 cq_pop=0 meas=0 lockid=0x123 msgtype=0 qpri=0 qtype=dir qid=20  dsi=0x300 
HCW DIR:20 vf_num=10 qe_valid=1 qe_orsp=0 qe_uhl=0 cq_pop=0 meas=0 lockid=0x123 msgtype=0 qpri=0 qtype=dir qid=20  dsi=0x300

poll_sch dir:13 0x8 200 100
poll_sch dir:40 0x8 200 100

rd hqm_system_csr.sbe_cnt_0          0x0000000a
rd hqm_system_csr.sbe_cnt_1          0x00000000
rd hqm_system_csr.alarm_sb_ecc_err   0x00000000

##set sb ecc
wr hqm_system_csr.ecc_ctl.WRITE_BAD_SB_ECC 1
rd hqm_system_csr.ecc_ctl.WRITE_BAD_SB_ECC 1
wr hqm_system_csr.vf_dir_vqid2qid[1470]    0x3e
rd hqm_system_csr.vf_dir_vqid2qid[1470]    0x3e

msix_alarm_wait 2000
## clear msix
wr hqm_system_csr.msix_ack.MSIX_0_ACK 1
rd hqm_system_csr.msix_ack.MSIX_0_ACK 0

wr hqm_system_csr.vf_dir_vpp2pp[980]      0x28
rd hqm_system_csr.vf_dir_vpp2pp[980]      0x28
msix_alarm_wait 2000
## clear msix
wr hqm_system_csr.msix_ack.MSIX_0_ACK 1
rd hqm_system_csr.msix_ack.MSIX_0_ACK 0

HCW DIR:6  qe_valid=1 qe_orsp=0 qe_uhl=0 cq_pop=0 meas=0 lockid=0x123 msgtype=0 qpri=0 qtype=dir qid=6  dsi=0x300
HCW DIR:6  qe_valid=1 qe_orsp=0 qe_uhl=0 cq_pop=0 meas=0 lockid=0x123 msgtype=0 qpri=0 qtype=dir qid=6  dsi=0x300
HCW DIR:6  qe_valid=1 qe_orsp=0 qe_uhl=0 cq_pop=0 meas=0 lockid=0x123 msgtype=0 qpri=0 qtype=dir qid=6  dsi=0x300
HCW DIR:6  qe_valid=1 qe_orsp=0 qe_uhl=0 cq_pop=0 meas=0 lockid=0x123 msgtype=0 qpri=0 qtype=dir qid=6  dsi=0x300

HCW DIR:30 vf_num=15 qe_valid=1 qe_orsp=0 qe_uhl=0 cq_pop=0 meas=0 lockid=0x123 msgtype=0 qpri=0 qtype=dir qid=30  dsi=0x300 batch=1 
HCW DIR:30 vf_num=15 qe_valid=1 qe_orsp=0 qe_uhl=0 cq_pop=0 meas=0 lockid=0x123 msgtype=0 qpri=0 qtype=dir qid=30  dsi=0x300 batch=1 
HCW DIR:30 vf_num=15 qe_valid=1 qe_orsp=0 qe_uhl=0 cq_pop=0 meas=0 lockid=0x123 msgtype=0 qpri=0 qtype=dir qid=30  dsi=0x300 batch=1 
HCW DIR:30 vf_num=15 qe_valid=1 qe_orsp=0 qe_uhl=0 cq_pop=0 meas=0 lockid=0x123 msgtype=0 qpri=0 qtype=dir qid=30  dsi=0x300
msix_alarm_wait 2000
## clear msix
wr hqm_system_csr.msix_ack.MSIX_0_ACK 1
rd hqm_system_csr.msix_ack.MSIX_0_ACK 0


HCW DIR:20 vf_num=10 qe_valid=1 qe_orsp=0 qe_uhl=0 cq_pop=0 meas=0 lockid=0x123 msgtype=0 qpri=0 qtype=dir qid=20  dsi=0x300 batch=1 
HCW DIR:20 vf_num=10 qe_valid=1 qe_orsp=0 qe_uhl=0 cq_pop=0 meas=0 lockid=0x123 msgtype=0 qpri=0 qtype=dir qid=20  dsi=0x300 batch=1 
HCW DIR:20 vf_num=10 qe_valid=1 qe_orsp=0 qe_uhl=0 cq_pop=0 meas=0 lockid=0x123 msgtype=0 qpri=0 qtype=dir qid=20  dsi=0x300 batch=1 
HCW DIR:20 vf_num=10 qe_valid=1 qe_orsp=0 qe_uhl=0 cq_pop=0 meas=0 lockid=0x123 msgtype=0 qpri=0 qtype=dir qid=20  dsi=0x300

msix_alarm_wait 2000
## clear msix
wr hqm_system_csr.msix_ack.MSIX_0_ACK 1
rd hqm_system_csr.msix_ack.MSIX_0_ACK 0

poll_sch dir:6  0x8 200 100
poll_sch dir:62  0x8 200 100
poll_sch dir:40  0xc 200 100

rd hqm_system_csr.sbe_cnt_0          0x00000014
rd hqm_system_csr.sbe_cnt_1          0x00000000
rd hqm_system_csr.alarm_sb_ecc_err   0x00000060 
rd hqm_system_csr.alarm_hw_synd      0xC0464400 0xffffff00 
##toekn return 
HCW DIR:2            qe_valid=0 qe_orsp=0 qe_uhl=0 cq_pop=1 meas=0 lockid=0x03 msgtype=0 qpri=0 qtype=dir qid=6  dsi=0x300
HCW DIR:2  vf_num=0  qe_valid=0 qe_orsp=0 qe_uhl=0 cq_pop=1 meas=0 lockid=0x03 msgtype=0 qpri=0 qtype=dir qid=20 dsi=0x300 
HCW DIR:20 vf_num=7  qe_valid=0 qe_orsp=0 qe_uhl=0 cq_pop=1 meas=0 lockid=0x03 msgtype=0 qpri=0 qtype=dir qid=20 dsi=0x300 
HCW DIR:20 vf_num=10 qe_valid=0 qe_orsp=0 qe_uhl=0 cq_pop=1 meas=0 lockid=0x0b msgtype=0 qpri=0 qtype=dir qid=20 dsi=0x300 
HCW DIR:30 vf_num=15 qe_valid=0 qe_orsp=0 qe_uhl=0 cq_pop=1 meas=0 lockid=0x07 msgtype=0 qpri=0 qtype=dir qid=30 dsi=0x300 
HCW DIR:6            qe_valid=0 qe_orsp=0 qe_uhl=0 cq_pop=1 meas=0 lockid=0x07 msgtype=0 qpri=0 qtype=dir qid=13 dsi=0x300
HCW DIR:13           qe_valid=0 qe_orsp=0 qe_uhl=0 cq_pop=1 meas=0 lockid=0x07 msgtype=0 qpri=0 qtype=dir qid=13 dsi=0x300
HCW DIR:51           qe_valid=0 qe_orsp=0 qe_uhl=0 cq_pop=1 meas=0 lockid=0x03 msgtype=0 qpri=0 qtype=dir qid=13 dsi=0x300
msix_alarm_wait 2000
## clear msix
wr hqm_system_csr.msix_ack.MSIX_0_ACK 1
rd hqm_system_csr.msix_ack.MSIX_0_ACK 0
wr hqm_system_csr.alarm_sb_ecc_err   0x00000060
rd hqm_system_csr.alarm_sb_ecc_err   0x00000000
idle 1000

