##############################################################
# Setup
# verify cq intruupt generated via threshold and timer  
# timer:cq_timer_intr_thresh=10, cq_timer_intr_ena=1 
# threshold:  cq_depth_intr_thresh=3 cq_depth_intr_ena=1
# cq_isr_en_code= [0-disable; 1-VF, 2-PF]

#mem_update      # initialize memories to hqm_cfg defaults using backdoor access

cfg_begin

  dir qid 0
  dir qid 1 
  dir qid 2 
  dir qid 3 

  dir qid 4
  dir qid 5 
  dir qid 6 
  dir qid 7 

  dir qid 8
  dir qid 9 
  dir qid 10
  dir qid 11

  dir qid 12
  dir qid 13
  dir qid 14
  dir qid 15

  dir qid 16
  dir qid 17
  dir qid 18
  dir qid 19

  dir qid 20
  dir qid 21
  dir qid 22
  dir qid 23

  dir qid 24
  dir qid 25
  dir qid 26
  dir qid 27

  dir qid 28
  dir qid 29
  dir qid 30
  dir qid 31


  vas VAS0:* credit_cnt=1024 dir_qidv0=1 dir_qidv1=1 dir_qidv2=1 dir_qidv3=1 dir_qidv4=1 dir_qidv5=1 dir_qidv6=1 dir_qidv7=1 dir_qidv8=1 dir_qidv9=1 dir_qidv10=1 dir_qidv11=1 dir_qidv12=1 dir_qidv13=1 dir_qidv14=1 dir_qidv15=1 dir_qidv16=1 dir_qidv17=1 dir_qidv18=1 dir_qidv19=1 dir_qidv20=1 dir_qidv21=1 dir_qidv22=1 dir_qidv23=1 dir_qidv24=1 dir_qidv25=1 dir_qidv26=1 dir_qidv27=1 dir_qidv28=1 dir_qidv29=1 dir_qidv30=1 dir_qidv31=1

  dir pp 0  vas=VAS0 
  dir pp 1  vas=VAS0 
  dir pp 2  vas=VAS0 
  dir pp 3  vas=VAS0 

  dir pp 4  vas=VAS0 
  dir pp 5  vas=VAS0 
  dir pp 6  vas=VAS0 
  dir pp 7  vas=VAS0 

  dir pp 8  vas=VAS0 
  dir pp 9  vas=VAS0 
  dir pp 10 vas=VAS0 
  dir pp 11 vas=VAS0 

  dir pp 12 vas=VAS0 
  dir pp 13 vas=VAS0 
  dir pp 14 vas=VAS0 
  dir pp 15 vas=VAS0 

  dir pp 16 vas=VAS0 
  dir pp 17 vas=VAS0 
  dir pp 18 vas=VAS0 
  dir pp 19 vas=VAS0 

  dir pp 20 vas=VAS0 
  dir pp 21 vas=VAS0 
  dir pp 22 vas=VAS0 
  dir pp 23 vas=VAS0 

  dir pp 24 vas=VAS0 
  dir pp 25 vas=VAS0 
  dir pp 26 vas=VAS0 
  dir pp 27 vas=VAS0 

  dir pp 28 vas=VAS0 
  dir pp 29 vas=VAS0 
  dir pp 30 vas=VAS0 
  dir pp 31 vas=VAS0 


  ##VF+threshold on cq [0 - 3]
  dir cq 0  gpa=sm cq_depth=16 cq_timer_intr_thresh=10 cq_timer_intr_ena=0 cq_depth_intr_thresh=3 cq_depth_intr_ena=1 cq_isr_en_code=1  cq_isr_vf=0 cq_isr_vector=0 
  dir cq 1  gpa=sm cq_depth=16 cq_timer_intr_thresh=10 cq_timer_intr_ena=0 cq_depth_intr_thresh=3 cq_depth_intr_ena=1 cq_isr_en_code=1  cq_isr_vf=0 cq_isr_vector=1
  dir cq 2  gpa=sm cq_depth=16 cq_timer_intr_thresh=10 cq_timer_intr_ena=0 cq_depth_intr_thresh=3 cq_depth_intr_ena=1 cq_isr_en_code=1  cq_isr_vf=0 cq_isr_vector=2
  dir cq 3  gpa=sm cq_depth=16 cq_timer_intr_thresh=10 cq_timer_intr_ena=0 cq_depth_intr_thresh=3 cq_depth_intr_ena=1 cq_isr_en_code=1  cq_isr_vf=0 cq_isr_vector=3
  ##VF+timer on cq[4 - 7]
  dir cq 4  gpa=sm cq_depth=16 cq_timer_intr_thresh=10 cq_timer_intr_ena=1 cq_depth_intr_thresh=3 cq_depth_intr_ena=0 cq_isr_en_code=1  cq_isr_vf=0 cq_isr_vector=4
  dir cq 5  gpa=sm cq_depth=16 cq_timer_intr_thresh=10 cq_timer_intr_ena=1 cq_depth_intr_thresh=3 cq_depth_intr_ena=0 cq_isr_en_code=1  cq_isr_vf=0 cq_isr_vector=5
  dir cq 6  gpa=sm cq_depth=16 cq_timer_intr_thresh=10 cq_timer_intr_ena=1 cq_depth_intr_thresh=3 cq_depth_intr_ena=0 cq_isr_en_code=1  cq_isr_vf=0 cq_isr_vector=6
  dir cq 7  gpa=sm cq_depth=16 cq_timer_intr_thresh=10 cq_timer_intr_ena=1 cq_depth_intr_thresh=3 cq_depth_intr_ena=0 cq_isr_en_code=1  cq_isr_vf=0 cq_isr_vector=7

  ##VF+threshold on cq [0 - 3]
  dir cq 8  gpa=sm cq_depth=16 cq_timer_intr_thresh=10 cq_timer_intr_ena=0 cq_depth_intr_thresh=3 cq_depth_intr_ena=1 cq_isr_en_code=1  cq_isr_vf=0 cq_isr_vector=8
  dir cq 9  gpa=sm cq_depth=16 cq_timer_intr_thresh=10 cq_timer_intr_ena=0 cq_depth_intr_thresh=3 cq_depth_intr_ena=1 cq_isr_en_code=1  cq_isr_vf=0 cq_isr_vector=9
  dir cq 10  gpa=sm cq_depth=16 cq_timer_intr_thresh=10 cq_timer_intr_ena=0 cq_depth_intr_thresh=3 cq_depth_intr_ena=1 cq_isr_en_code=1  cq_isr_vf=0 cq_isr_vector=10
  dir cq 11  gpa=sm cq_depth=16 cq_timer_intr_thresh=10 cq_timer_intr_ena=0 cq_depth_intr_thresh=3 cq_depth_intr_ena=1 cq_isr_en_code=1  cq_isr_vf=0 cq_isr_vector=11
  ##VF+timer on cq[4 - 7]
  dir cq 12  gpa=sm cq_depth=16 cq_timer_intr_thresh=10 cq_timer_intr_ena=1 cq_depth_intr_thresh=3 cq_depth_intr_ena=0 cq_isr_en_code=1  cq_isr_vf=0 cq_isr_vector=12
  dir cq 13  gpa=sm cq_depth=16 cq_timer_intr_thresh=10 cq_timer_intr_ena=1 cq_depth_intr_thresh=3 cq_depth_intr_ena=0 cq_isr_en_code=1  cq_isr_vf=0 cq_isr_vector=13
  dir cq 14  gpa=sm cq_depth=16 cq_timer_intr_thresh=10 cq_timer_intr_ena=1 cq_depth_intr_thresh=3 cq_depth_intr_ena=0 cq_isr_en_code=1  cq_isr_vf=0 cq_isr_vector=14
  dir cq 15  gpa=sm cq_depth=16 cq_timer_intr_thresh=10 cq_timer_intr_ena=1 cq_depth_intr_thresh=3 cq_depth_intr_ena=0 cq_isr_en_code=1  cq_isr_vf=0 cq_isr_vector=15

  ##VF+threshold on cq [0 - 3]
  dir cq 16  gpa=sm cq_depth=16 cq_timer_intr_thresh=10 cq_timer_intr_ena=0 cq_depth_intr_thresh=3 cq_depth_intr_ena=1 cq_isr_en_code=1  cq_isr_vf=0 cq_isr_vector=16 
  dir cq 17  gpa=sm cq_depth=16 cq_timer_intr_thresh=10 cq_timer_intr_ena=0 cq_depth_intr_thresh=3 cq_depth_intr_ena=1 cq_isr_en_code=1  cq_isr_vf=0 cq_isr_vector=17
  dir cq 18  gpa=sm cq_depth=16 cq_timer_intr_thresh=10 cq_timer_intr_ena=0 cq_depth_intr_thresh=3 cq_depth_intr_ena=1 cq_isr_en_code=1  cq_isr_vf=0 cq_isr_vector=18
  dir cq 19  gpa=sm cq_depth=16 cq_timer_intr_thresh=10 cq_timer_intr_ena=0 cq_depth_intr_thresh=3 cq_depth_intr_ena=1 cq_isr_en_code=1  cq_isr_vf=0 cq_isr_vector=19
  ##VF+timer on cq[4 - 7]
  dir cq 20  gpa=sm cq_depth=16 cq_timer_intr_thresh=10 cq_timer_intr_ena=1 cq_depth_intr_thresh=3 cq_depth_intr_ena=0 cq_isr_en_code=1  cq_isr_vf=0 cq_isr_vector=20
  dir cq 21  gpa=sm cq_depth=16 cq_timer_intr_thresh=10 cq_timer_intr_ena=1 cq_depth_intr_thresh=3 cq_depth_intr_ena=0 cq_isr_en_code=1  cq_isr_vf=0 cq_isr_vector=21
  dir cq 22  gpa=sm cq_depth=16 cq_timer_intr_thresh=10 cq_timer_intr_ena=1 cq_depth_intr_thresh=3 cq_depth_intr_ena=0 cq_isr_en_code=1  cq_isr_vf=0 cq_isr_vector=22
  dir cq 23  gpa=sm cq_depth=16 cq_timer_intr_thresh=10 cq_timer_intr_ena=1 cq_depth_intr_thresh=3 cq_depth_intr_ena=0 cq_isr_en_code=1  cq_isr_vf=0 cq_isr_vector=23

  ##VF+threshold on cq [0 - 3]
  dir cq 24  gpa=sm cq_depth=16 cq_timer_intr_thresh=10 cq_timer_intr_ena=0 cq_depth_intr_thresh=3 cq_depth_intr_ena=1 cq_isr_en_code=1  cq_isr_vf=0 cq_isr_vector=24 
  dir cq 25  gpa=sm cq_depth=16 cq_timer_intr_thresh=10 cq_timer_intr_ena=0 cq_depth_intr_thresh=3 cq_depth_intr_ena=1 cq_isr_en_code=1  cq_isr_vf=0 cq_isr_vector=25
  dir cq 26  gpa=sm cq_depth=16 cq_timer_intr_thresh=10 cq_timer_intr_ena=0 cq_depth_intr_thresh=3 cq_depth_intr_ena=1 cq_isr_en_code=1  cq_isr_vf=0 cq_isr_vector=26
  dir cq 27  gpa=sm cq_depth=16 cq_timer_intr_thresh=10 cq_timer_intr_ena=0 cq_depth_intr_thresh=3 cq_depth_intr_ena=1 cq_isr_en_code=1  cq_isr_vf=0 cq_isr_vector=27
  ##VF+timer on cq[4 - 7]
  dir cq 28  gpa=sm cq_depth=16 cq_timer_intr_thresh=10 cq_timer_intr_ena=1 cq_depth_intr_thresh=3 cq_depth_intr_ena=0 cq_isr_en_code=1  cq_isr_vf=0 cq_isr_vector=28
  dir cq 29  gpa=sm cq_depth=16 cq_timer_intr_thresh=10 cq_timer_intr_ena=1 cq_depth_intr_thresh=3 cq_depth_intr_ena=0 cq_isr_en_code=1  cq_isr_vf=0 cq_isr_vector=29
  dir cq 30  gpa=sm cq_depth=16 cq_timer_intr_thresh=10 cq_timer_intr_ena=1 cq_depth_intr_thresh=3 cq_depth_intr_ena=0 cq_isr_en_code=1  cq_isr_vf=0 cq_isr_vector=30
  dir cq 31  gpa=sm cq_depth=16 cq_timer_intr_thresh=10 cq_timer_intr_ena=1 cq_depth_intr_thresh=3 cq_depth_intr_ena=0 cq_isr_en_code=1  cq_isr_vf=0 cq_isr_vector=31

  ##cq0,3
  vf VF:*
  vf VF dir_vpp0_v=1  dir_vpp0_pp=0   dir_vqid0_v=1  dir_vqid0_qid=0   msi_enable=1 msi_multi_msg_en=5 msi_addr=0x22222220aaaaaa00 msi_data=0xa5a55a00 msi0_dir_vcq=0 
  vf VF dir_vpp1_v=1  dir_vpp1_pp=1   dir_vqid1_v=1  dir_vqid1_qid=1   msi_enable=1 msi_multi_msg_en=5 msi_addr=0x33333330aaaaaa10 msi_data=0x5a5a5a01 msi1_dir_vcq=1
  vf VF dir_vpp2_v=1  dir_vpp2_pp=2   dir_vqid2_v=1  dir_vqid2_qid=2   msi_enable=1 msi_multi_msg_en=5 msi_addr=0x33333330aaaaaa20 msi_data=0x5a5a5a02 msi2_dir_vcq=2
  vf VF dir_vpp3_v=1  dir_vpp3_pp=3   dir_vqid3_v=1  dir_vqid3_qid=3   msi_enable=1 msi_multi_msg_en=5 msi_addr=0x33333330aaaaaa30 msi_data=0x5a5a5a03 msi3_dir_vcq=3
  vf VF dir_vpp4_v=1  dir_vpp4_pp=4   dir_vqid4_v=1  dir_vqid4_qid=4   msi_enable=1 msi_multi_msg_en=5 msi_addr=0x33333330aaaaaa40 msi_data=0x5a5a5a03 msi4_dir_vcq=4
  vf VF dir_vpp5_v=1  dir_vpp5_pp=5   dir_vqid5_v=1  dir_vqid5_qid=5   msi_enable=1 msi_multi_msg_en=5 msi_addr=0x33333330aaaaaa50 msi_data=0x5a5a5a04 msi5_dir_vcq=5
  vf VF dir_vpp6_v=1  dir_vpp6_pp=6   dir_vqid6_v=1  dir_vqid6_qid=6   msi_enable=1 msi_multi_msg_en=5 msi_addr=0x33333330aaaaaa60 msi_data=0x5a5a5a05 msi6_dir_vcq=6
  vf VF dir_vpp7_v=1  dir_vpp7_pp=7   dir_vqid7_v=1  dir_vqid7_qid=7   msi_enable=1 msi_multi_msg_en=5 msi_addr=0x33333330aaaaaa70 msi_data=0x5a5a5a06 msi7_dir_vcq=7
  vf VF dir_vpp8_v=1  dir_vpp8_pp=8   dir_vqid8_v=1  dir_vqid8_qid=8   msi_enable=1 msi_multi_msg_en=5 msi_addr=0x33333330aaaaaa80 msi_data=0x5a5a5a07 msi8_dir_vcq=8
  vf VF dir_vpp9_v=1  dir_vpp9_pp=9   dir_vqid9_v=1  dir_vqid9_qid=9   msi_enable=1 msi_multi_msg_en=5 msi_addr=0x33333330aaaaaa90 msi_data=0x5a5a5a08 msi9_dir_vcq=9
  vf VF dir_vpp10_v=1 dir_vpp10_pp=10 dir_vqid10_v=1 dir_vqid10_qid=10 msi_enable=1 msi_multi_msg_en=5 msi_addr=0x33333330aaaaaaa0 msi_data=0x5a5a5a09 msi10_dir_vcq=10
  vf VF dir_vpp11_v=1 dir_vpp11_pp=11 dir_vqid11_v=1 dir_vqid11_qid=11 msi_enable=1 msi_multi_msg_en=5 msi_addr=0x33333330aaaaaab0 msi_data=0x5a5a5a0a msi11_dir_vcq=11
  vf VF dir_vpp12_v=1 dir_vpp12_pp=12 dir_vqid12_v=1 dir_vqid12_qid=12 msi_enable=1 msi_multi_msg_en=5 msi_addr=0x33333330aaaaaac0 msi_data=0x5a5a5a0b msi12_dir_vcq=12
  vf VF dir_vpp13_v=1 dir_vpp13_pp=13 dir_vqid13_v=1 dir_vqid13_qid=13 msi_enable=1 msi_multi_msg_en=5 msi_addr=0x33333330aaaaaad0 msi_data=0x5a5a5a0c msi13_dir_vcq=13
  vf VF dir_vpp14_v=1 dir_vpp14_pp=14 dir_vqid14_v=1 dir_vqid14_qid=14 msi_enable=1 msi_multi_msg_en=5 msi_addr=0x33333330aaaaaae0 msi_data=0x5a5a5a0d msi14_dir_vcq=14
  vf VF dir_vpp15_v=1 dir_vpp15_pp=15 dir_vqid15_v=1 dir_vqid15_qid=15 msi_enable=1 msi_multi_msg_en=5 msi_addr=0x33333330aaaaaaf0 msi_data=0x5a5a5a0e msi15_dir_vcq=15
  vf VF dir_vpp16_v=1 dir_vpp16_pp=16 dir_vqid16_v=1 dir_vqid16_qid=16 msi_enable=1 msi_multi_msg_en=5 msi_addr=0x33333330aaaaab00 msi_data=0x5a5a5a0f msi16_dir_vcq=16
  vf VF dir_vpp17_v=1 dir_vpp17_pp=17 dir_vqid17_v=1 dir_vqid17_qid=17 msi_enable=1 msi_multi_msg_en=5 msi_addr=0x33333330aaaaab10 msi_data=0x5a5a5a10 msi17_dir_vcq=17
  vf VF dir_vpp18_v=1 dir_vpp18_pp=18 dir_vqid18_v=1 dir_vqid18_qid=18 msi_enable=1 msi_multi_msg_en=5 msi_addr=0x33333330aaaaab20 msi_data=0x5a5a5a11 msi18_dir_vcq=18
  vf VF dir_vpp19_v=1 dir_vpp19_pp=19 dir_vqid19_v=1 dir_vqid19_qid=19 msi_enable=1 msi_multi_msg_en=5 msi_addr=0x33333330aaaaab30 msi_data=0x5a5a5a12 msi19_dir_vcq=19
  vf VF dir_vpp20_v=1 dir_vpp20_pp=20 dir_vqid20_v=1 dir_vqid20_qid=20 msi_enable=1 msi_multi_msg_en=5 msi_addr=0x33333330aaaaab40 msi_data=0x5a5a5a13 msi20_dir_vcq=20
  vf VF dir_vpp21_v=1 dir_vpp21_pp=21 dir_vqid21_v=1 dir_vqid21_qid=21 msi_enable=1 msi_multi_msg_en=5 msi_addr=0x33333330aaaaab50 msi_data=0x5a5a5a14 msi21_dir_vcq=21
  vf VF dir_vpp22_v=1 dir_vpp22_pp=22 dir_vqid22_v=1 dir_vqid22_qid=22 msi_enable=1 msi_multi_msg_en=5 msi_addr=0x33333330aaaaab60 msi_data=0x5a5a5a15 msi22_dir_vcq=22
  vf VF dir_vpp23_v=1 dir_vpp23_pp=23 dir_vqid23_v=1 dir_vqid23_qid=23 msi_enable=1 msi_multi_msg_en=5 msi_addr=0x33333330aaaaab70 msi_data=0x5a5a5a16 msi23_dir_vcq=23
  vf VF dir_vpp24_v=1 dir_vpp24_pp=24 dir_vqid24_v=1 dir_vqid24_qid=24 msi_enable=1 msi_multi_msg_en=5 msi_addr=0x33333330aaaaab80 msi_data=0x5a5a5a17 msi24_dir_vcq=24
  vf VF dir_vpp25_v=1 dir_vpp25_pp=25 dir_vqid25_v=1 dir_vqid25_qid=25 msi_enable=1 msi_multi_msg_en=5 msi_addr=0x33333330aaaaab90 msi_data=0x5a5a5a18 msi25_dir_vcq=25
  vf VF dir_vpp26_v=1 dir_vpp26_pp=26 dir_vqid26_v=1 dir_vqid26_qid=26 msi_enable=1 msi_multi_msg_en=5 msi_addr=0x33333330aaaaaba0 msi_data=0x5a5a5a19 msi26_dir_vcq=26
  vf VF dir_vpp27_v=1 dir_vpp27_pp=27 dir_vqid27_v=1 dir_vqid27_qid=27 msi_enable=1 msi_multi_msg_en=5 msi_addr=0x33333330aaaaabb0 msi_data=0x5a5a5a1a msi27_dir_vcq=27
  vf VF dir_vpp28_v=1 dir_vpp28_pp=28 dir_vqid28_v=1 dir_vqid28_qid=28 msi_enable=1 msi_multi_msg_en=5 msi_addr=0x33333330aaaaabc0 msi_data=0x5a5a5a1b msi28_dir_vcq=28
  vf VF dir_vpp29_v=1 dir_vpp29_pp=29 dir_vqid29_v=1 dir_vqid29_qid=29 msi_enable=1 msi_multi_msg_en=5 msi_addr=0x33333330aaaaabd0 msi_data=0x5a5a5a1c msi29_dir_vcq=29
  vf VF dir_vpp30_v=1 dir_vpp30_pp=30 dir_vqid30_v=1 dir_vqid30_qid=30 msi_enable=1 msi_multi_msg_en=5 msi_addr=0x33333330aaaaabe0 msi_data=0x5a5a5a1d msi30_dir_vcq=30
  vf VF dir_vpp31_v=1 dir_vpp31_pp=31 dir_vqid31_v=1 dir_vqid31_qid=31 msi_enable=1 msi_multi_msg_en=5 msi_addr=0x33333330aaaaabf0 msi_data=0x5a5a5a1e msi30_dir_vcq=31

cfg_end


##configuration reg set only for cq for which inter en is set
rd credit_hist_pipe.cfg_dir_cq_intr_armed0 0x0
wr credit_hist_pipe.cfg_dir_cq_intr_armed0 0xffffffff
rd credit_hist_pipe.cfg_dir_cq_intr_armed0 0xffffffff
## Interrupt timer enable bit. &SAMPLE_INTERVAL required for timer intr case
wr credit_hist_pipe.cfg_dir_cq_timer_ctl.enb 1
wr credit_hist_pipe.cfg_dir_cq_timer_ctl.sample_interval 1
rd credit_hist_pipe.cfg_dir_cq_timer_ctl.enb 1
rd credit_hist_pipe.cfg_dir_cq_timer_ctl.sample_interval 1

wr hqm_vf_cfg_i[0].msi_cap_msg_mask 0xffffffff


##ingress alarm enable
rd hqm_system_csr.ingress_alarm_enable 0x00000000
wr hqm_system_csr.ingress_alarm_enable 0xffffffff
rd hqm_system_csr.ingress_alarm_enable 0x0000003f
